import{k as u,r as n,j as e,p as v,U as w,aN as k,b as C,bj as q,T as l,ac as L}from"./index-BOMQ6ZnB.js";import{a4 as i,a5 as m}from"./CategoricalChart-CVOu2Sdu.js";import{B as T,a as A}from"./BarChart-CapdVOWV.js";import{C as x}from"./CartesianGrid-Dh6FfMw5.js";import{X as o,Y as h}from"./CartesianChart-BCPM_Iof.js";import{L as D}from"./LineChart-BCAJLlzb.js";import{L as j}from"./Line-OmcAOY_B.js";import"./tooltipContext-aDNLGl9E.js";import"./ErrorBarContext-DeCBPfcE.js";import"./graphicalItemSelectors-D0O9Wiuq.js";import"./getRadiusAndStrokeWidthFromDot-DgyDVF4g.js";const X=()=>{const p=u(),[g,N]=n.useState(!0),[s,b]=n.useState([]),f=[{department:"التمريض - ذكور",total_staff:12,present:10,absent:1,on_leave:1,attendance_rate:83,care_completion_rate:78,impact_score:15},{department:"التمريض - إناث",total_staff:8,present:6,absent:2,on_leave:0,attendance_rate:75,care_completion_rate:65,impact_score:28},{department:"الرعاية الاجتماعية",total_staff:5,present:5,absent:0,on_leave:0,attendance_rate:100,care_completion_rate:95,impact_score:0},{department:"العلاج الطبيعي",total_staff:3,present:3,absent:0,on_leave:0,attendance_rate:100,care_completion_rate:92,impact_score:0},{department:"الإشراف الليلي",total_staff:6,present:4,absent:1,on_leave:1,attendance_rate:67,care_completion_rate:55,impact_score:35},{department:"الخدمات المساندة",total_staff:10,present:9,absent:1,on_leave:0,attendance_rate:90,care_completion_rate:88,impact_score:8}],_=[{day:"الأحد",attendance:92,care_quality:88},{day:"الاثنين",attendance:88,care_quality:82},{day:"الثلاثاء",attendance:85,care_quality:78},{day:"الأربعاء",attendance:90,care_quality:85},{day:"الخميس",attendance:78,care_quality:68},{day:"الجمعة",attendance:70,care_quality:60},{day:"السبت",attendance:75,care_quality:65}];n.useEffect(()=>{setTimeout(()=>{b(f),N(!1)},500)},[]);const c=Math.round(s.reduce((t,a)=>t+a.attendance_rate,0)/s.length),y=s.reduce((t,a)=>t+a.absent,0),r=s.filter(t=>t.impact_score>=20),d={value:-.78,interpretation:"كلما زاد الغياب، انخفضت جودة العناية بنسبة 78%"};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>p(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-hrsd-orange to-hrsd-gold rounded-xl",children:e.jsx(w,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-hierarchy-title text-gray-900",children:"مؤشر الموارد البشرية"}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"ربط الغياب بجودة الخدمة"})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mr-auto p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(k,{className:"w-5 h-5 text-gray-500"})})]})}),g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-hrsd-teal"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 text-white ${c>=85?"bg-gradient-to-br from-hrsd-green to-hrsd-teal":"bg-gradient-to-br from-hrsd-gold to-hrsd-orange"}`,children:[e.jsx(C,{className:"w-8 h-8 mb-2"}),e.jsxs("p",{className:"text-4xl font-bold",children:[c,"%"]}),e.jsx("p",{className:"text-sm text-white/80",children:"نسبة الحضور اليوم"})]}),e.jsx("div",{className:"hrsd-card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-10 h-10 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-red-600",children:y}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"غائبين اليوم"})]})]})}),e.jsx("div",{className:"hrsd-card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{className:"w-10 h-10 text-hrsd-gold"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-hrsd-gold",children:r.length}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"أقسام متأثرة"})]})]})}),e.jsxs("div",{className:"hrsd-card bg-red-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:"ارتباط الغياب بالجودة"})]}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[Math.abs(d.value*100).toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:d.interpretation})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"hrsd-card",children:[e.jsx("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4",children:"الحضور حسب القسم"}),e.jsx(i,{width:"100%",height:250,children:e.jsxs(T,{data:s,layout:"vertical",children:[e.jsx(x,{strokeDasharray:"3 3"}),e.jsx(o,{type:"number",domain:[0,100]}),e.jsx(h,{type:"category",dataKey:"department",width:120}),e.jsx(m,{formatter:t=>`${t}%`}),e.jsx(A,{dataKey:"attendance_rate",fill:"rgb(20, 130, 135)",radius:[0,4,4,0],name:"نسبة الحضور"})]})})]}),e.jsxs("div",{className:"hrsd-card",children:[e.jsx("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4",children:"اتجاه الحضور vs الجودة (أسبوعي)"}),e.jsx(i,{width:"100%",height:250,children:e.jsxs(D,{data:_,children:[e.jsx(x,{strokeDasharray:"3 3"}),e.jsx(o,{dataKey:"day"}),e.jsx(h,{domain:[0,100]}),e.jsx(m,{}),e.jsx(j,{type:"monotone",dataKey:"attendance",stroke:"rgb(20, 130, 135)",strokeWidth:2,name:"الحضور %"}),e.jsx(j,{type:"monotone",dataKey:"care_quality",stroke:"rgb(245, 150, 30)",strokeWidth:2,name:"جودة العناية %"})]})})]})]}),r.length>0&&e.jsxs("div",{className:"hrsd-card mb-6",children:[e.jsxs("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5 text-red-600"}),"أقسام تحتاج دعم عاجل"]}),e.jsx("div",{className:"space-y-3",children:r.map((t,a)=>e.jsxs("div",{className:"p-4 bg-red-50 rounded-xl border-r-4 border-red-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-red-900",children:t.department}),e.jsxs("span",{className:"badge-danger",children:["تأثير ",t.impact_score,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"الحضور"}),e.jsxs("p",{className:"font-bold text-red-600",children:[t.attendance_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"الغياب"}),e.jsxs("p",{className:"font-bold",children:[t.absent," موظف"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"جودة العناية"}),e.jsxs("p",{className:"font-bold text-red-600",children:[t.care_completion_rate,"%"]})]})]}),e.jsx("p",{className:"text-xs text-red-700 mt-2",children:"⚠️ توصية: تعيين دعم طارئ من قسم آخر"})]},a))})]}),e.jsxs("div",{className:"hrsd-card",children:[e.jsx("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4",children:"تفصيل الأقسام"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"p-3 text-right font-medium",children:"القسم"}),e.jsx("th",{className:"p-3 text-center font-medium",children:"الإجمالي"}),e.jsx("th",{className:"p-3 text-center font-medium",children:"حاضر"}),e.jsx("th",{className:"p-3 text-center font-medium",children:"غائب"}),e.jsx("th",{className:"p-3 text-center font-medium",children:"إجازة"}),e.jsx("th",{className:"p-3 text-center font-medium",children:"الحضور %"}),e.jsx("th",{className:"p-3 text-center font-medium",children:"جودة العناية %"})]})}),e.jsx("tbody",{children:s.map((t,a)=>e.jsxs("tr",{className:`border-b ${t.impact_score>=20?"bg-red-50":""}`,children:[e.jsx("td",{className:"p-3 font-medium",children:t.department}),e.jsx("td",{className:"p-3 text-center",children:t.total_staff}),e.jsx("td",{className:"p-3 text-center text-hrsd-green",children:t.present}),e.jsx("td",{className:"p-3 text-center text-red-600",children:t.absent}),e.jsx("td",{className:"p-3 text-center text-hrsd-gold",children:t.on_leave}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("span",{className:t.attendance_rate>=85?"text-hrsd-green":"text-red-600",children:[t.attendance_rate,"%"]})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("span",{className:t.care_completion_rate>=80?"text-hrsd-green":"text-red-600",children:[t.care_completion_rate,"%"]})})]},a))})]})})]})]})]})};export{X as HRImpactIndicator,X as default};
