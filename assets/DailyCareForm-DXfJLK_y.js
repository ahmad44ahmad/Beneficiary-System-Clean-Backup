import{r as t,j as e,A as v,a7 as N,ad as _,l as w,O as C,q as k,a9 as S}from"./index-BOMQ6ZnB.js";const A=({beneficiaryName:h,beneficiaryId:b,onSuccess:d})=>{const[c,m]=t.useState(!1),[u,p]=t.useState(""),[x,g]=t.useState(""),[D,q]=t.useState(!1),[I,R]=t.useState(""),[E,F]=t.useState(!1),[s,i]=t.useState({shift:"صباحي",temperature:"",pulse:"",blood_pressure_systolic:"",blood_pressure_diastolic:"",oxygen_saturation:"",blood_sugar:"",weight:"",mobility_today:"active",mood:"stable",notes:"",incidents:"",requires_followup:!1}),l=r=>{const{name:a,value:o,type:j}=r.target;if(j==="checkbox"){const n=r.target.checked;i(y=>({...y,[a]:n}))}else["temperature","pulse","blood_pressure_systolic","blood_pressure_diastolic","oxygen_saturation","blood_sugar","weight"].includes(a)?i(n=>({...n,[a]:o})):i(n=>({...n,[a]:o}))},f=async r=>{r.preventDefault(),m(!0),g(""),p("");try{const a={beneficiary_id:b,recorded_by:null,shift:s.shift,log_date:new Date().toISOString().split("T")[0],log_time:new Date().toLocaleTimeString("en-GB"),temperature:s.temperature?parseFloat(s.temperature):null,pulse:s.pulse?parseInt(s.pulse):null,blood_pressure_systolic:s.blood_pressure_systolic?parseInt(s.blood_pressure_systolic):null,blood_pressure_diastolic:s.blood_pressure_diastolic?parseInt(s.blood_pressure_diastolic):null,oxygen_saturation:s.oxygen_saturation?parseInt(s.oxygen_saturation):null,blood_sugar:s.blood_sugar?parseInt(s.blood_sugar):null,weight:s.weight?parseFloat(s.weight):null,mobility_today:s.mobility_today,mood:s.mood,notes:s.notes,incidents:s.incidents,requires_followup:s.requires_followup},{error:o}=await S.from("daily_care_logs").insert(a);if(o)throw o;p("تم حفظ سجل العناية اليومية بنجاح"),d&&d()}catch(a){console.error("Error saving daily log:",a),g(a.message||"حدث خطأ أثناء الحفظ")}finally{m(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-emerald-100 font-readex",dir:"rtl",children:[e.jsxs("div",{className:"bg-gradient-to-l from-emerald-600 to-teal-600 p-6 text-white flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(v,{className:"h-6 w-6"}),"سجل العناية اليومي"]}),e.jsxs("p",{className:"opacity-90 mt-1 text-sm",children:["تسجيل العلامات الحيوية والملاحظات اليومية للمستفيد: ",h]})]}),u&&e.jsxs("div",{className:"bg-white/20 px-4 py-2 rounded-lg flex items-center gap-2 animate-pulse",children:[e.jsx(N,{className:"w-5 h-5"}),u]})]}),e.jsxs("form",{onSubmit:f,className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-emerald-50 p-4 rounded-lg flex items-center gap-4",children:[e.jsx("label",{className:"font-bold text-emerald-800",children:"الوردية (Shift):"}),e.jsx("div",{className:"flex gap-4",children:["صباحي","مسائي","ليلي"].map(r=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"shift",value:r,checked:s.shift===r,onChange:l,className:"text-emerald-600 focus:ring-emerald-500"}),e.jsx("span",{className:"text-emerald-900",children:r})]},r))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 border-b pb-2",children:[e.jsx(_,{className:"h-5 w-5 text-red-500"}),"العلامات الحيوية"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحرارة (C)"}),e.jsx("input",{name:"temperature",type:"number",step:"0.1",placeholder:"37.0",value:s.temperature,onChange:l,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none hover:border-emerald-300 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النبض (BPM)"}),e.jsx("input",{name:"pulse",type:"number",placeholder:"80",value:s.pulse,onChange:l,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none hover:border-emerald-300 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ضغط الدم (ملم زئبق)"}),e.jsxs("div",{className:"flex items-center gap-2",dir:"ltr",children:[e.jsx("input",{name:"blood_pressure_systolic",type:"number",placeholder:"Sys",value:s.blood_pressure_systolic,onChange:l,className:"w-1/2 p-2 border rounded-lg text-center"}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("input",{name:"blood_pressure_diastolic",type:"number",placeholder:"Dia",value:s.blood_pressure_diastolic,onChange:l,className:"w-1/2 p-2 border rounded-lg text-center"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأكسجين (%)"}),e.jsx("input",{name:"oxygen_saturation",type:"number",placeholder:"98",value:s.oxygen_saturation,onChange:l,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none hover:border-emerald-300 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السكر (mg/dL)"}),e.jsx("input",{name:"blood_sugar",type:"number",placeholder:"100",value:s.blood_sugar,onChange:l,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none hover:border-emerald-300 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوزن (kg)"}),e.jsx("input",{name:"weight",type:"number",step:"0.1",placeholder:"optional",value:s.weight,onChange:l,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none hover:border-emerald-300 transition-colors"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 border-b pb-2",children:[e.jsx(w,{className:"h-5 w-5 text-blue-500"}),"التقييم العام"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحالة الحركية اليوم"}),e.jsxs("select",{name:"mobility_today",value:s.mobility_today,onChange:l,className:"w-full p-2 border rounded-lg",children:[e.jsx("option",{value:"active",children:"نشيط / طبيعي"}),e.jsx("option",{value:"limited",children:"حركة محدودة"}),e.jsx("option",{value:"bedridden",children:"ملازم للفراش طوال اليوم"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المزاج والحالة النفسية"}),e.jsxs("select",{name:"mood",value:s.mood,onChange:l,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",children:[e.jsx("option",{value:"stable",children:"مستقر"}),e.jsx("option",{value:"happy",children:"سعيد / متعاون"}),e.jsx("option",{value:"anxious",children:"قلق / متوتر"}),e.jsx("option",{value:"aggressive",children:"عدواني"}),e.jsx("option",{value:"depressed",children:"مكتئب / منعزل"}),e.jsx("option",{value:"confused",children:"مشوش الذهن"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ملاحظات التمريض"}),e.jsx("textarea",{name:"notes",value:s.notes,onChange:l,className:"w-full p-2 border rounded-lg h-24 focus:ring-2 focus:ring-emerald-500 outline-none resize-none",placeholder:"سجل أي ملاحظات غير عادية هنا..."})]})]}),e.jsxs("div",{className:"md:col-span-2 bg-red-50 p-4 rounded-lg border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-red-800 font-bold",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{children:"حوادث ومتابعة"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{name:"incidents",value:s.incidents,onChange:l,className:"w-full p-2 border rounded-lg h-16 focus:ring-2 focus:ring-red-500 outline-none resize-none bg-white",placeholder:"هل وقع أي حادث أو عرض صحي طارئ؟ (اتركه فارغاً إذا لم يوجد)"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"requires_followup",checked:s.requires_followup,onChange:l,className:"w-5 h-5 text-red-600 rounded focus:ring-red-500"}),e.jsx("span",{className:"font-medium text-red-700",children:"يحتاج إلى متابعة طبية أو إشراف خاص في الوردية القادمة"})]})]})]}),e.jsxs("div",{className:"md:col-span-2 pt-4 border-t flex justify-between items-center bg-gray-50 -m-6 p-6 mt-2",children:[x&&e.jsx("p",{className:"text-red-500 text-sm",children:x}),e.jsxs("div",{className:"flex gap-3 mr-auto",children:[e.jsx("button",{type:"button",className:"px-6 py-2 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors font-medium",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:c,className:"px-8 py-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all flex items-center gap-2 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:c?"جار الحفظ...":e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-5 w-5"}),"حفظ السجل"]})})]})]})]})]})};export{A as DailyCareForm};
