import{j as e,k as M,r as n,a9 as f,p as O,G as R,E as B,U as G,aA as T,aB as U,az as z,as as Y}from"./index-BOMQ6ZnB.js";const N=({active:l,onClick:r,label:i,icon:t,badge:c,variant:p="primary"})=>{const h="flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-all font-medium",w={primary:l?"bg-[#14415A] text-white shadow-lg":"text-gray-500 hover:bg-gray-50 hover:text-gray-700",secondary:l?"bg-[#148287] text-white shadow-lg":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"};return e.jsxs("button",{onClick:r,className:`${h} ${w[p]}`,children:[t&&e.jsx(t,{className:"w-5 h-5"}),e.jsx("span",{children:i}),c!==void 0&&c>0&&e.jsx("span",{className:"bg-[#F5961E] text-white text-xs px-2 py-0.5 rounded-full",children:c})]})},q=["ابراهيم احمد عمر الفقيه الحضريتي","ابراهيم محمد رافع علي ال فلتان الشمراني","احمد سالم سويد سالم ال خفير","احمد محمد غرم احمد الزهراني","احمد مسفر سعيد مسفر ال طريس الغامدي","الحميدي حمدان زيد زياد الصاعدي","امجد محمد احمد مقايص","تركي ظافر العلياني","ثامر نايف احمد محمد العبدلي المالكي","حسن صالح علي عبد الله ال مصلح","حسن احمد محمد العمري","خالد العمري","سالم ناصر سالم علي ال صعدي الشهري","سعد علي فايز غانم ال هزاع القرني","محمد عبد الله مسفر مفرح ال مفرح الغامدي"],x=()=>q.map((l,r)=>{const i=Array(31).fill(!1);for(let t=4;t<31;t++)i[t]=!0;return{id:r+1,real_id:`demo-${r}`,name:l,days:i}}),J=()=>{const l=M(),[r,i]=n.useState("attendance"),[t,c]=n.useState("male"),[p,h]=n.useState("السبت"),[w,o]=n.useState(!1),[S,u]=n.useState([]),[_,v]=n.useState(!1);n.useEffect(()=>{r==="attendance"&&D()},[r,t]);const D=async()=>{v(!0);try{if(!f){u(x()),o(!0);return}const s=t==="male"?"ذكر":"أنثى",{data:d,error:a}=await f.from("beneficiaries").select("id, full_name, file_number").eq("gender",s).order("full_name");if(a||!d||d.length===0){u(x()),o(!0);return}const b=new Date,C=new Date(b.getFullYear(),b.getMonth(),1).toISOString(),k=new Date(b.getFullYear(),b.getMonth()+1,0,23,59,59,999).toISOString(),F=d.map(m=>m.id),{data:g,error:I}=await f.from("daily_meals").select("beneficiary_id, meal_date").in("beneficiary_id",F).gte("meal_date",C).lte("meal_date",k);if(I){u(x()),o(!0);return}const L=d.map((m,$)=>{const A=Array(31).fill(!1);return((g==null?void 0:g.filter(y=>y.beneficiary_id===m.id))||[]).forEach(y=>{const j=new Date(y.meal_date).getDate();j>=1&&j<=31&&(A[j-1]=!0)}),{id:$+1,real_id:m.id,name:m.full_name,days:A}});u(L),o(!1)}catch{u(x()),o(!0)}finally{v(!1)}},E=[{section:"وجبة الإفطار",items:[{name:"فول",unit:"كجم",nursery:{prescribed:2,disbursed:2},adults:{prescribed:10,disbursed:10}},{name:"تميس",unit:"عدد",nursery:{prescribed:10,disbursed:10},adults:{prescribed:50,disbursed:50}},{name:"عدس",unit:"كجم",nursery:{prescribed:3,disbursed:3},adults:{prescribed:12,disbursed:12}},{name:"جبن سائل",unit:"كجم",nursery:{prescribed:2,disbursed:2},adults:{prescribed:8,disbursed:8}},{name:"حلاوة طحينية",unit:"كجم",nursery:{prescribed:1,disbursed:1},adults:{prescribed:5,disbursed:5}},{name:"مربى",unit:"كجم",nursery:{prescribed:1,disbursed:1},adults:{prescribed:5,disbursed:5}},{name:"عسل",unit:"كجم",nursery:{prescribed:1,disbursed:1},adults:{prescribed:5,disbursed:5}},{name:"بيض مسلوق",unit:"عدد",nursery:{prescribed:20,disbursed:20},adults:{prescribed:100,disbursed:100}},{name:"حليب طازج",unit:"لتر",nursery:{prescribed:15,disbursed:15},adults:{prescribed:60,disbursed:60}},{name:"شاي",unit:"كيلو",nursery:{prescribed:.5,disbursed:.5},adults:{prescribed:2,disbursed:2}},{name:"خبز صامولي",unit:"عدد",nursery:{prescribed:20,disbursed:20},adults:{prescribed:100,disbursed:100}}]},{section:"وجبة الغداء",items:[{name:"أرز بشاور",unit:"كجم",nursery:{prescribed:8,disbursed:8},adults:{prescribed:35,disbursed:35}},{name:"دجاج",unit:"حبة",nursery:{prescribed:10,disbursed:10},adults:{prescribed:45,disbursed:45}},{name:"لحم حاشي",unit:"كجم",nursery:{prescribed:0,disbursed:0},adults:{prescribed:0,disbursed:0}},{name:"إيدام خضار مشكل",unit:"كجم",nursery:{prescribed:5,disbursed:5},adults:{prescribed:20,disbursed:20}},{name:"سلطة خضراء",unit:"كجم",nursery:{prescribed:4,disbursed:4},adults:{prescribed:15,disbursed:15}},{name:"فاكهة (برتقال/تفاح)",unit:"حبة",nursery:{prescribed:20,disbursed:20},adults:{prescribed:80,disbursed:80}},{name:"لبن",unit:"لتر",nursery:{prescribed:5,disbursed:5},adults:{prescribed:20,disbursed:20}},{name:"عصير طازج",unit:"لتر",nursery:{prescribed:5,disbursed:5},adults:{prescribed:20,disbursed:20}}]},{section:"وجبة العشاء (نواشف + غير نواشف)",items:[{name:"مكرونة بالبشاميل",unit:"كجم",nursery:{prescribed:6,disbursed:6},adults:{prescribed:25,disbursed:25}},{name:"فاصوليا حمراء",unit:"كجم",nursery:{prescribed:3,disbursed:3},adults:{prescribed:12,disbursed:12}},{name:"تونة",unit:"علبة",nursery:{prescribed:5,disbursed:5},adults:{prescribed:20,disbursed:20}},{name:"زيتون",unit:"كجم",nursery:{prescribed:1,disbursed:1},adults:{prescribed:4,disbursed:4}},{name:"جبن شيدر",unit:"كجم",nursery:{prescribed:1,disbursed:1},adults:{prescribed:5,disbursed:5}},{name:"زبادي",unit:"علبة",nursery:{prescribed:20,disbursed:20},adults:{prescribed:80,disbursed:80}}]},{section:"وجبة المكمل الغذائي (Special Diets)",items:[{name:"حليب بدياشور",unit:"علبة",nursery:{prescribed:5,disbursed:5},adults:{prescribed:0,disbursed:0}},{name:"انشور",unit:"علبة",nursery:{prescribed:0,disbursed:0},adults:{prescribed:10,disbursed:10}},{name:"بسكويت مخصص",unit:"كرتون",nursery:{prescribed:1,disbursed:1},adults:{prescribed:2,disbursed:2}}]},{section:"المواد الإضافية ومواد النظافة",items:[{name:"سائل غسيل الأواني",unit:"جالون",nursery:{prescribed:1,disbursed:1},adults:{prescribed:4,disbursed:4}},{name:"كلور",unit:"جالون",nursery:{prescribed:.5,disbursed:.5},adults:{prescribed:2,disbursed:2}},{name:"أكياس نفايات",unit:"رطة",nursery:{prescribed:1,disbursed:1},adults:{prescribed:3,disbursed:3}},{name:"مناديل سفرة",unit:"كرتون",nursery:{prescribed:1,disbursed:1},adults:{prescribed:5,disbursed:5}},{name:"قفازات طبخ",unit:"كرتون",nursery:{prescribed:1,disbursed:1},adults:{prescribed:2,disbursed:2}}]}];return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#14415A]",children:"جداول الإعاشة (مستخرجة)"}),e.jsx("p",{className:"text-gray-600",children:"مركز التأهيل الشامل بالباحة"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>l("/catering"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"عودة"]}),e.jsxs("button",{className:"px-4 py-2 bg-[#148287] text-white rounded-lg hover:bg-[#0e6b6f] flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"طباعة"]}),e.jsxs("button",{className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"تصدير Excel"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm mb-6 p-2 flex gap-2",children:[e.jsx(N,{active:r==="attendance",onClick:()=>i("attendance"),label:"حضور وغياب",icon:G}),e.jsx(N,{active:r==="daily_log",onClick:()=>i("daily_log"),label:"اليوميات (الكميات)",icon:T}),e.jsx(N,{active:r==="summary",onClick:()=>i("summary"),label:"الخلاصة",icon:U})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold text-[#14415A]",children:"القسم:"}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>c("male"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="male"?"bg-white text-[#14415A] shadow-sm":"text-gray-500"}`,children:"ذكور"}),e.jsx("button",{onClick:()=>c("female"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="female"?"bg-white text-[#14415A] shadow-sm":"text-gray-500"}`,children:"إناث"})]})]}),r==="daily_log"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold text-[#14415A]",children:"اليوم:"}),e.jsx("select",{value:p,onChange:s=>h(s.target.value),className:"bg-gray-50 border-gray-200 rounded-lg px-4 py-2 text-sm focus:ring-[#F5961E] focus:border-[#F5961E]",children:["السبت","الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة"].map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),r==="attendance"&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden min-h-[300px]",children:_?e.jsx("div",{className:"flex justify-center items-center h-[300px]",children:e.jsx(z,{size:"md"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-center border-collapse text-xs",children:[e.jsx("thead",{className:"bg-[#14415A] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border border-white/10 w-10",children:"م"}),e.jsx("th",{className:"p-2 border border-white/10 w-48 text-right px-4",children:"الاسم"}),Array.from({length:30},(s,d)=>e.jsx("th",{className:"p-2 border border-white/10 w-8",children:d+1},d))]})}),e.jsx("tbody",{children:S.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 border border-gray-100 font-bold text-gray-400",children:s.id}),e.jsx("td",{className:"p-2 border border-gray-100 text-right px-4 font-medium",children:s.name}),s.days.map((d,a)=>e.jsx("td",{className:"p-2 border border-gray-100",children:e.jsx("div",{className:`w-4 h-4 rounded-full mx-auto ${d?"bg-green-500/20":"bg-red-500/20"}`,children:d?"✓":""})},a))]},s.id))})]})})}),r==="daily_log"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-center border border-gray-300",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-[#14415A] text-white",children:[e.jsx("th",{colSpan:3,className:"p-3 border border-white/20",children:"الكميات المقررة"}),e.jsx("th",{rowSpan:2,className:"p-3 border border-white/20 bg-[#148287] w-48",children:"المادة"}),e.jsx("th",{colSpan:3,className:"p-3 border border-white/20",children:"الكميات المنصرفة"})]}),e.jsxs("tr",{className:"bg-gray-100 text-gray-700 text-sm font-bold",children:[e.jsx("th",{className:"p-2 border border-gray-300",children:"قسم الحضانة"}),e.jsx("th",{className:"p-2 border border-gray-300",children:"قسم الكبار"}),e.jsx("th",{className:"p-2 border border-gray-300",children:"المجموع"}),e.jsx("th",{className:"p-2 border border-gray-300",children:"وزن (كجم)"}),e.jsx("th",{className:"p-2 border border-gray-300",children:"وزن (جرام)"}),e.jsx("th",{className:"p-2 border border-gray-300",children:"البيان"})]})]}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:E.map((s,d)=>e.jsxs(Y.Fragment,{children:[e.jsx("tr",{className:"bg-yellow-50",children:e.jsx("td",{colSpan:7,className:"p-3 text-right font-bold text-[#F5961E] border border-gray-200",children:s.section})}),s.items.map((a,b)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border border-gray-200",children:a.nursery.prescribed}),e.jsx("td",{className:"p-3 border border-gray-200",children:a.adults.prescribed}),e.jsx("td",{className:"p-3 border border-gray-200 font-bold bg-gray-50",children:a.nursery.prescribed+a.adults.prescribed}),e.jsxs("td",{className:"p-3 border-x-4 border-gray-300 font-bold text-[#14415A]",children:[a.name," ",e.jsxs("span",{className:"text-xs text-gray-400 font-normal",children:["(",a.unit,")"]})]}),e.jsx("td",{className:"p-3 border border-gray-200 font-bold text-blue-700",children:a.nursery.disbursed+a.adults.disbursed}),e.jsx("td",{className:"p-3 border border-gray-200 text-gray-400",children:"-"}),e.jsx("td",{className:"p-3 border border-gray-200 text-xs text-gray-500",children:"تم الصرف"})]},b))]},d))})]})}),e.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-8 text-center print:mt-12 break-inside-avoid",children:[e.jsxs("div",{className:"border-t-2 border-gray-300 pt-4",children:[e.jsx("p",{className:"font-bold text-[#14415A] mb-2",children:"أخصائي التغذية"}),e.jsx("p",{className:"text-gray-500",children:".................."})]}),e.jsxs("div",{className:"border-t-2 border-gray-300 pt-4",children:[e.jsx("p",{className:"font-bold text-[#14415A] mb-2",children:"ممثل الشركة المتعهدة"}),e.jsx("p",{className:"text-gray-500",children:".................."})]}),e.jsxs("div",{className:"border-t-2 border-gray-300 pt-4",children:[e.jsx("p",{className:"font-bold text-[#14415A] mb-2",children:"لجنة استلام الإعاشة"}),e.jsx("p",{className:"text-gray-500",children:".................."})]})]})]}),r==="summary"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-[#14415A] mb-4",children:"خلاصة شهر (ديسمبر)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"border rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"قسم الذكور"}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"إجمالي الوجبات"}),e.jsx("span",{className:"font-bold",children:"1,240"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"أيام الحضور الكامل"}),e.jsx("span",{className:"font-bold text-green-600",children:"22 يوم"})]})]}),e.jsxs("div",{className:"border rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"قسم الإناث"}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"إجمالي الوجبات"}),e.jsx("span",{className:"font-bold",children:"980"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"أيام الحضور الكامل"}),e.jsx("span",{className:"font-bold text-green-600",children:"25 يوم"})]})]})]})]})]})};export{J as CateringReports};
