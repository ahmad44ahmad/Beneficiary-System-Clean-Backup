import{k as h,r as n,j as e,A as u,R as j,w as v,U as N,O as g,n as b,c as p,a as f,o as w}from"./index-BOMQ6ZnB.js";import{i as y}from"./ipcService-DiDuQnof.js";import{e as C}from"./empowermentService-CRw_S9mo.js";const o=({title:s,icon:i,stats:l,bgClass:t,linkTo:d,delay:r=0})=>{const a=h();return e.jsxs("div",{onClick:()=>a(d),className:`${t} rounded-2xl p-5 cursor-pointer hover-lift btn-ripple animate-slide-up opacity-0`,style:{animationDelay:`${r*.1}s`,animationFillMode:"forwards"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:i}),e.jsx("h3",{className:"font-bold text-white",children:s})]}),e.jsx(w,{className:"w-5 h-5 text-white/70"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map((c,x)=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:c.value}),e.jsx("p",{className:"text-xs text-white/80",children:c.label})]},x))})]})},m=({type:s,title:i,severity:l,time:t})=>{const d={high:"border-red-400 bg-red-50",medium:"border-yellow-400 bg-yellow-50",low:"border-blue-400 bg-blue-50"},r={infection:e.jsx(j,{className:"w-4 h-4 text-red-500"}),fall:e.jsx(g,{className:"w-4 h-4 text-orange-500"}),goal:e.jsx(v,{className:"w-4 h-4 text-green-500"})};return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border-r-4 ${d[l]}`,children:[e.jsx("div",{className:"p-1.5 bg-white rounded-lg shadow-sm",children:r[s]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:i}),e.jsx("p",{className:"text-xs text-gray-500",children:t})]})]})},R=()=>{h();const[s,i]=n.useState(null),[l,t]=n.useState(null),[d,r]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const[c,x]=await Promise.all([y.getIPCStats(),C.getEmpowermentStats()]);i(c),t(x)}finally{r(!1)}})()},[]),d?e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"skeleton skeleton-title w-48"}),e.jsx("div",{className:"skeleton w-24 h-5"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(a=>e.jsx("div",{className:"skeleton skeleton-card h-44 rounded-2xl"},a))}),e.jsx("div",{className:"skeleton h-32 rounded-2xl"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>e.jsx("div",{className:"skeleton h-20 rounded-xl"},a))})]}):e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(u,{className:"w-6 h-6 text-emerald-600"}),"نظرة شاملة على الوحدات"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["آخر تحديث: ",new Date().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(o,{title:"درع السلامة (IPC)",icon:e.jsx(j,{className:"w-6 h-6 text-white animate-float"}),bgClass:"gradient-ipc",linkTo:"/ipc",delay:1,stats:[{label:"معدل الامتثال",value:`${(s==null?void 0:s.avgComplianceRate)||0}%`},{label:"حالات نشطة",value:(s==null?void 0:s.activeIncidents)||0},{label:"نسبة التحصين",value:`${(s==null?void 0:s.immunizationRate)||0}%`},{label:"معلّقة",value:(s==null?void 0:s.pendingFollowups)||0}]}),e.jsx(o,{title:"محرك التمكين",icon:e.jsx(v,{className:"w-6 h-6 text-white animate-float"}),bgClass:"gradient-empowerment",linkTo:"/empowerment",delay:2,stats:[{label:"إجمالي الأهداف",value:(l==null?void 0:l.totalGoals)||0},{label:"محققة",value:(l==null?void 0:l.achievedGoals)||0},{label:"قيد التنفيذ",value:(l==null?void 0:l.inProgressGoals)||0},{label:"متوسط التقدم",value:`${(l==null?void 0:l.avgProgress)||0}%`}]}),e.jsx(o,{title:"بوابة الأسرة",icon:e.jsx(N,{className:"w-6 h-6 text-white animate-float"}),bgClass:"gradient-family",linkTo:"/family",delay:3,stats:[{label:"أسر مسجلة",value:45},{label:"زيارات هذا الشهر",value:12},{label:"رسائل جديدة",value:3},{label:"تقييم الرضا",value:"92%"}]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-red-500"}),"التنبيهات الأخيرة"]}),e.jsx("button",{onClick:()=>{},className:"text-sm text-emerald-600 hover:underline",children:"عرض الكل"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(m,{type:"infection",title:"حالة عدوى تنفسية - جناح الإناث",severity:"high",time:"منذ 15 دقيقة"}),e.jsx(m,{type:"fall",title:"خطر سقوط عالي - محمد العمري",severity:"medium",time:"منذ ساعة"}),e.jsx(m,{type:"goal",title:"هدف جديد محقق - المشي 30م",severity:"low",time:"اليوم"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(b,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:((l==null?void 0:l.achievedGoals)||0)+Math.floor(((s==null?void 0:s.avgComplianceRate)||0)/10)}),e.jsx("p",{className:"text-xs text-gray-500",children:"إنجازات اليوم"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(p,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:((s==null?void 0:s.pendingFollowups)||0)+((l==null?void 0:l.inProgressGoals)||0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"مهام معلقة"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(g,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:(s==null?void 0:s.activeIncidents)||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"تنبيهات حرجة"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(f,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[Math.round((((s==null?void 0:s.avgComplianceRate)||0)+((l==null?void 0:l.avgProgress)||0))/2),"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"مؤشر الأداء"})]})]})]})]})};export{R as CrossModuleDashboard,R as default};
