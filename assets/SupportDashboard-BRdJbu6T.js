import{r as m,j as e,J as C,B as p,F as S,T as v,ah as c,aj as T,ak as b,C as n,al as N,am as k}from"./index-BOMQ6ZnB.js";import{m as x,a as u}from"./assets-SKHdl_M4.js";import{I as A}from"./Input-C08-tSFm.js";import{InventoryPanel as F}from"./InventoryPanel-Dg4aHzfJ.js";const y={medical_device:"أجهزة طبية",furniture:"أثاث وتجهيزات",vehicle:"مركبات",electronic:"إلكترونيات",appliance:"أجهزة كهربائية",other:"أخرى"},$={new:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",damaged:"bg-red-100 text-red-800",retired:"bg-gray-100 text-gray-800"},B=({assets:a,onReportFault:r})=>{const[l,h]=m.useState(""),[i,o]=m.useState("all"),[d,g]=m.useState("all"),t=a.filter(s=>{const j=s.name.includes(l)||s.assetTag.includes(l)||s.location.includes(l),f=i==="all"||s.category===i,w=d==="all"||s.condition===d;return j&&f&&w});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center bg-white p-4 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex-1 w-full md:w-auto relative",children:[e.jsx(C,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400"}),e.jsx(A,{placeholder:"بحث برقم الأصل، الاسم، أو الموقع...",className:"pr-10",value:l,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("select",{className:"border rounded-md p-2 text-sm bg-gray-50",value:i,onChange:s=>o(s.target.value),children:[e.jsx("option",{value:"all",children:"كل التصنيفات"}),Object.entries(y).map(([s,j])=>e.jsx("option",{value:s,children:j},s))]}),e.jsxs("select",{className:"border rounded-md p-2 text-sm bg-gray-50",value:d,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"all",children:"كل الحالات"}),e.jsx("option",{value:"new",children:"جديد"}),e.jsx("option",{value:"good",children:"جيد"}),e.jsx("option",{value:"fair",children:"متوسط"}),e.jsx("option",{value:"poor",children:"ضعيف"}),e.jsx("option",{value:"damaged",children:"تالف (يحتاج صيانة)"}),e.jsx("option",{value:"retired",children:"مكهن"})]})]}),e.jsxs(p,{children:[e.jsx(S,{className:"w-4 h-4 ml-2"}),"إضافة أصل جديد"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-700 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"رقم الأصل (Tag)"}),e.jsx("th",{className:"p-3",children:"اسم الأصل"}),e.jsx("th",{className:"p-3",children:"التصنيف"}),e.jsx("th",{className:"p-3",children:"الموقع / العهدة"}),e.jsx("th",{className:"p-3",children:"الحالة"}),e.jsx("th",{className:"p-3",children:"القيمة"}),e.jsx("th",{className:"p-3 text-center",children:"إجراءات"})]})}),e.jsxs("tbody",{className:"divide-y",children:[t.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-mono text-gray-600",children:s.assetTag}),e.jsx("td",{className:"p-3 font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"p-3 text-gray-600",children:y[s.category]}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"text-gray-900",children:s.location}),e.jsx("div",{className:"text-xs text-gray-500",children:s.custody})]}),e.jsx("td",{className:"p-3",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$[s.condition]}`,children:[s.condition==="damaged"&&e.jsx(v,{className:"w-3 h-3 inline ml-1"}),s.condition.toUpperCase()]})}),e.jsxs("td",{className:"p-3 text-gray-600",children:[s.value.toLocaleString()," ر.س"]}),e.jsxs("td",{className:"p-3 flex justify-center gap-2",children:[e.jsx(p,{size:"sm",variant:"outline",className:"text-orange-600 border-orange-200 hover:bg-orange-50",onClick:()=>r(s),title:"إبلاغ عن عطل",children:e.jsx(c,{className:"w-4 h-4"})}),e.jsx(p,{size:"sm",variant:"ghost",className:"text-gray-400",children:e.jsx(T,{className:"w-4 h-4"})})]})]},s.id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-400",children:"لا توجد أصول مطابقة للبحث"})})]})]})})]})},E=()=>{const[a,r]=m.useState("dashboard"),l=x.length,h=x.reduce((t,s)=>t+s.value,0),i=x.filter(t=>t.condition==="damaged").length,o=u.filter(t=>t.status==="open"||t.status==="in_progress").length,d=u.filter(t=>t.priority==="critical"||t.priority==="high").length,g=t=>{alert(`Opening ticket for: ${t.name}`)};return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen font-sans",dir:"rtl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(b,{className:"w-8 h-8 text-indigo-600"}),"بوابة الخدمات المساندة والأصول"]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"نظام إدارة الأصول الثابتة، المخزون، والصيانة (SPGA Compliant)"})]}),e.jsxs("div",{className:"flex gap-4 border-b mb-6",children:[e.jsx("button",{onClick:()=>r("dashboard"),className:`pb-3 px-4 text-sm font-medium transition-colors border-b-2 ${a==="dashboard"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"لوحة المؤشرات"}),e.jsx("button",{onClick:()=>r("assets"),className:`pb-3 px-4 text-sm font-medium transition-colors border-b-2 ${a==="assets"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"سجل الأصول الثابتة"}),e.jsx("button",{onClick:()=>r("consumables"),className:`pb-3 px-4 text-sm font-medium transition-colors border-b-2 ${a==="consumables"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"المخزون والكسوة"}),e.jsxs("button",{onClick:()=>r("maintenance"),className:`pb-3 px-4 text-sm font-medium transition-colors border-b-2 ${a==="maintenance"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["طلبات الصيانة",o>0&&e.jsx("span",{className:"mr-2 bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full",children:o})]})]}),e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300",children:[a==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(n,{className:"p-6 border-r-4 border-r-indigo-500 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"إجمالي الأصول"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:l})]}),e.jsx(b,{className:"w-8 h-8 text-indigo-100"})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400",children:["القيمة: ",h.toLocaleString()," ر.س"]})]}),e.jsxs(n,{className:"p-6 border-r-4 border-r-orange-500 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"تذاكر الصيانة المفتوحة"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:o})]}),e.jsx(c,{className:"w-8 h-8 text-orange-100"})]}),e.jsxs("div",{className:"mt-4 text-xs text-orange-600 font-medium",children:[d," تذاكر ذات أولوية عالية"]})]}),e.jsxs(n,{className:"p-6 border-r-4 border-r-red-500 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"أصول تالفة / معطلة"}),e.jsx("h3",{className:"text-3xl font-bold text-red-600",children:i})]}),e.jsx(v,{className:"w-8 h-8 text-red-100"})]}),e.jsx("div",{className:"mt-4 text-xs text-red-500",children:"تتطلب إجراء (إصلاح أو تكهين)"})]}),e.jsxs(n,{className:"p-6 border-r-4 border-r-green-500 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"حالة المخزون"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"مستقر"})]}),e.jsx(N,{className:"w-8 h-8 text-green-100"})]}),e.jsx("div",{className:"mt-4 text-xs text-green-600",children:"تم تحديث الجرد الأسبوعي"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"p-6 bg-white shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5 text-gray-500"}),"آخر بلاغات الصيانة"]}),e.jsx("div",{className:"space-y-4",children:u.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:`w-2 h-2 mt-2 rounded-full ${t.status==="open"?"bg-red-500":"bg-orange-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:t.assetName}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(t.reportedAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:t.issueDescription}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-white border rounded text-gray-500",children:["بواسطة: ",t.reportedBy]}),t.priority==="high"&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-red-100 text-red-700 rounded font-bold",children:"عاجل"})]})]})]},t.id))})]}),e.jsxs(n,{className:"p-6 bg-white shadow-sm",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"إجراءات سريعة"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{className:"p-4 border rounded-xl hover:bg-indigo-50 hover:border-indigo-200 transition-all text-center group",onClick:()=>r("assets"),children:[e.jsx(b,{className:"w-8 h-8 mx-auto mb-2 text-indigo-500 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"إضافة أصل جديد"})]}),e.jsxs("button",{className:"p-4 border rounded-xl hover:bg-orange-50 hover:border-orange-200 transition-all text-center group",children:[e.jsx(c,{className:"w-8 h-8 mx-auto mb-2 text-orange-500 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"فتح بلاغ صيانة"})]}),e.jsxs("button",{className:"p-4 border rounded-xl hover:bg-green-50 hover:border-green-200 transition-all text-center group",onClick:()=>r("consumables"),children:[e.jsx(N,{className:"w-8 h-8 mx-auto mb-2 text-green-500 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"صرف مواد (كسوة)"})]})]})]})]})]}),a==="assets"&&e.jsx(B,{assets:x,onReportFault:g}),a==="consumables"&&e.jsx(F,{inventory:k}),a==="maintenance"&&e.jsxs("div",{className:"text-center py-10 bg-white rounded-lg border border-dashed",children:[e.jsx(c,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"نظام تذاكر الصيانة"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"سيتم عرض جدول التذاكر التفصيلي هنا..."})]})]})]})};export{E as SupportDashboard};
