import{k as y,f as w,r as d,h as u,j as e,l as C,U as k,m as S,F as j,n as A,C as I,B as c,o as D,p as M,q as F}from"./index-BOMQ6ZnB.js";import{I as t}from"./Input-C08-tSFm.js";const o=[{id:1,title:"بيانات المستفيد والولي",icon:C},{id:2,title:"الوضع الأسري",icon:k},{id:3,title:"الوضع السكني والاقتصادي",icon:S},{id:4,title:"الرأي المهني والتوصيات",icon:j}],E=()=>{const b=y(),{currentUser:R}=w(),[i,m]=d.useState(1),[r,g]=d.useState(""),[a,l]=d.useState({researchDate:new Date().toISOString().split("T")[0],isFatherAlive:"yes",isMotherAlive:"yes",hasChronicIllness:"no"});d.useEffect(()=>{if(r){const s=u.find(n=>n.id===r);s&&l(n=>({...n,beneficiaryId:s.id,beneficiaryName:s.fullName}))}},[r]);const v=()=>m(s=>Math.min(s+1,o.length)),f=()=>m(s=>Math.max(s-1,1)),p=()=>{setTimeout(()=>{b("/social")},500)},N=()=>{switch(i){case 1:return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-100 mb-6",children:[e.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"البيانات الأساسية (تعبئة تلقائية)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"المستفيد"}),e.jsxs("select",{className:"w-full border rounded-md p-2 bg-white",value:r,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"",children:"اختر مستفيد لبدء البحث..."}),u.map(s=>e.jsxs("option",{value:s.id,children:[s.fullName," (ID: ",s.id,")"]},s.id))]})]}),e.jsx(t,{label:"تاريخ البحث",type:"date",value:a.researchDate,onChange:s=>l({...a,researchDate:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{label:"اسم الولي",value:a.guardianName||"",onChange:s=>l({...a,guardianName:s.target.value})}),e.jsx(t,{label:"صلة القرابة",value:a.guardianRelation||"",onChange:s=>l({...a,guardianRelation:s.target.value})}),e.jsx(t,{label:"رقم الجوال",value:a.guardianMobile||"",onChange:s=>l({...a,guardianMobile:s.target.value})}),e.jsx(t,{label:"المهنة",value:a.guardianProfession||"",onChange:s=>l({...a,guardianProfession:s.target.value})})]})]});case 2:return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"حالة الأب"}),e.jsx("div",{className:"flex gap-4",children:["yes","no","unknown"].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"isFatherAlive",checked:a.isFatherAlive===s,onChange:()=>l({...a,isFatherAlive:s})}),e.jsx("span",{children:s==="yes"?"على قيد الحياة":s==="no"?"متوفى":"مجهول"})]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"حالة الأم"}),e.jsx("div",{className:"flex gap-4",children:["yes","no","unknown"].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"isMotherAlive",checked:a.isMotherAlive===s,onChange:()=>l({...a,isMotherAlive:s})}),e.jsx("span",{children:s==="yes"?"على قيد الحياة":s==="no"?"متوفى":"مجهول"})]},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"التركيبة الأسرية (الإخوة والأخوات)"}),e.jsx("textarea",{className:"w-full border rounded-md p-2 h-24",placeholder:"اذكر عدد الإخوة، ترتيب المستفيد، ومن يقيم معه في المنزل...",value:a.familyComposition||"",onChange:s=>l({...a,familyComposition:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"مدى تكيف الأسرة مع حالة المستفيد"}),e.jsx("textarea",{className:"w-full border rounded-md p-2 h-24",placeholder:"صف تقبل الأسرة، زياراتهم، اهتمامهم...",value:a.familyAdaptation||"",onChange:s=>l({...a,familyAdaptation:s.target.value})})]})]});case 3:return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"نوع السكن"}),e.jsxs("select",{className:"w-full border rounded-md p-2",value:a.chronicIllnessDetails||"",onChange:s=>l({...a,chronicIllnessDetails:s.target.value}),children:[e.jsx("option",{value:"",children:"اختر..."}),e.jsx("option",{value:"owned",children:"ملك"}),e.jsx("option",{value:"rented",children:"إيجار"}),e.jsx("option",{value:"popular",children:"شعبي"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الحالة الاقتصادية"}),e.jsxs("select",{className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"good",children:"جيدة"}),e.jsx("option",{value:"average",children:"متوسطة"}),e.jsx("option",{value:"low",children:"ضعيفة (يحتاج دعم)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"تفاصيل الدخل (الضمان، التقاعد، إلخ)"}),e.jsx("textarea",{className:"w-full border rounded-md p-2 h-24",placeholder:"اذكر مصادر الدخل..."})]})]});case 4:return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-md border border-yellow-100 mb-4",children:[e.jsxs("h4",{className:"font-bold text-yellow-800 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"ملخص الباحث الاجتماعي"]}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"هذا الملخص سيظهر في الملف الرئيسي للمستفيد وسيطلع عليه الفريق الطبي والإداري."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"ملخص البحث"}),e.jsx("textarea",{className:"w-full border rounded-md p-2 h-32",placeholder:"اكتب ملخصاً شاملاً للحالة الاجتماعية...",value:a.socialResearchSummary||"",onChange:s=>l({...a,socialResearchSummary:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"التوصيات"}),e.jsx("textarea",{className:"w-full border rounded-md p-2 h-24",placeholder:"توصياتك كأخصائي اجتماعي (مثلاً: يحتاج زيارات مكثفة، يحتاج دعم مالي، إلخ)..."})]})]});default:return null}};return e.jsxs("div",{className:"max-w-4xl mx-auto pb-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"بحث اجتماعي جديد"}),e.jsx("p",{className:"text-gray-500",children:"توثيق الحالة الاجتماعية للمستفيد لضمان تقديم الرعاية المناسبة"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between relative",children:[e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-0.5 bg-gray-200 -z-10"}),o.map(s=>{const n=s.icon,h=i===s.id,x=i>s.id;return e.jsxs("div",{className:"flex flex-col items-center bg-white px-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors ${h?"border-blue-600 bg-blue-50 text-blue-600":x?"border-green-600 bg-green-50 text-green-600":"border-gray-300 text-gray-400"}`,children:x?e.jsx(A,{className:"w-6 h-6"}):e.jsx(n,{className:"w-5 h-5"})}),e.jsx("span",{className:`text-xs font-medium mt-2 ${h?"text-blue-600":"text-gray-500"}`,children:s.title})]},s.id)})]})}),e.jsxs(I,{className:"p-6 min-h-[400px] flex flex-col",children:[e.jsx("div",{className:"flex-1",children:N()}),e.jsxs("div",{className:"flex justify-between mt-8 pt-4 border-t border-gray-100",children:[e.jsxs(c,{variant:"outline",onClick:f,disabled:i===1,children:[e.jsx(D,{className:"w-4 h-4 ml-2"}),"السابق"]}),i<o.length?e.jsxs(c,{onClick:v,disabled:!r&&i===1,children:["التالي",e.jsx(M,{className:"w-4 h-4 mr-2"})]}):e.jsxs(c,{className:"bg-green-600 hover:bg-green-700",onClick:p,children:[e.jsx(F,{className:"w-4 h-4 ml-2"}),"حفظ واعتماد البحث"]})]})]})]})};export{E as SocialResearchWizard};
