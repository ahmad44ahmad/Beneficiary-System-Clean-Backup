import{k as D,r as a,j as e,az as le,p as z,R as H,aN as ne,P as ge,O as P,S as K,a8 as J,A as ce,b as W,a as pe,ac as je,a0 as Y,a_ as re,n as fe,V as ye,T as ie,a$ as Ne,q as ue,l as be,F as ve,ad as we,J as _e,U as Ce,y as ke,aV as Se}from"./index-BOMQ6ZnB.js";import{i as v}from"./ipcService-DiDuQnof.js";import{a4 as O,a5 as M}from"./CategoricalChart-CVOu2Sdu.js";import{A as Ee,a as Ie}from"./AreaChart-DlheuEFq.js";import{C as Z}from"./CartesianGrid-Dh6FfMw5.js";import{X as Q,Y as ee}from"./CartesianChart-BCPM_Iof.js";import{P as Te,a as Le}from"./PieChart-CJb0iZgP.js";import{C as oe}from"./tooltipContext-aDNLGl9E.js";import{L as de}from"./Legend-BKPvidGc.js";import{B as Ae,a as De}from"./BarChart-CapdVOWV.js";import{L as ze}from"./LineChart-BCAJLlzb.js";import{L as se}from"./Line-OmcAOY_B.js";import"./getRadiusAndStrokeWidthFromDot-DgyDVF4g.js";import"./graphicalItemSelectors-D0O9Wiuq.js";import"./PolarChart-BOiECZ66.js";import"./ErrorBarContext-DeCBPfcE.js";const R=({title:i,value:o,unit:c="%",trend:t,icon:p,color:r,onClick:d})=>{const g={success:"bg-green-100",warning:"bg-yellow-100",error:"bg-red-100",info:"bg-blue-100",primary:"bg-emerald-100"};return e.jsx("div",{className:`bg-white rounded-2xl p-5 shadow-sm border hover:shadow-md transition-all cursor-pointer ${d?"hover:scale-[1.02]":""}`,onClick:d,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:i}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:o}),e.jsx("span",{className:"text-gray-500 text-sm",children:c})]}),t!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${t>=0?"text-green-600":"text-red-600"}`,children:[t>=0?e.jsx(pe,{size:16}):e.jsx(je,{size:16}),e.jsxs("span",{children:[Math.abs(t),"% Ø¹Ù† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ"]})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${g[r]}`,children:p})]})})},$e=({data:i})=>{const o=Math.max(...i.map(c=>c.compliance));return e.jsx("div",{className:"flex items-end justify-between gap-2 h-40 px-2",children:i.map((c,t)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"w-full bg-emerald-500 rounded-t-lg transition-all hover:bg-emerald-600",style:{height:`${c.compliance/o*100}%`,minHeight:"20px"}}),e.jsx("span",{className:"text-xs text-gray-500 mt-2 text-center",children:c.week}),e.jsxs("span",{className:"text-sm font-bold text-gray-700",children:[c.compliance,"%"]})]},t))})},is=()=>{const i=D(),[o,c]=a.useState(!0),[t,p]=a.useState(null),[r,d]=a.useState([]);a.useEffect(()=>{g()},[]);const g=async()=>{c(!0);try{const[w,x]=await Promise.all([v.getIPCStats(),v.getWeeklyComplianceData()]);p(w),d(x)}finally{c(!1)}};return o?e.jsx(le,{fullScreen:!0,message:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰..."}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-emerald-100 rounded-xl",children:e.jsx(H,{className:"w-8 h-8 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Ø¯Ø±Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…Ø©"}),e.jsx("p",{className:"text-gray-500",children:"Ù„ÙˆØ­Ø© Ù‚ÙŠØ§Ø¯Ø© Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ - BICSL"})]})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:g,className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"ØªØ­Ø¯ÙŠØ«"]}),e.jsxs("button",{onClick:()=>i("/ipc/inspection"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2 shadow-md",children:[e.jsx(ge,{className:"w-4 h-4"}),"Ø¬ÙˆÙ„Ø© ØªÙØªÙŠØ´ Ø¬Ø¯ÙŠØ¯Ø©"]})]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(R,{title:"Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ",value:t.avgComplianceRate,trend:t.complianceTrend,icon:e.jsx(H,{size:24}),color:t.avgComplianceRate>=85?"success":t.avgComplianceRate>=70?"warning":"error",onClick:()=>i("/ipc/inspections")}),e.jsx(R,{title:"Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©",value:t.activeIncidents,unit:"Ø­Ø§Ù„Ø©",trend:t.incidentsTrend,icon:e.jsx(P,{size:24}),color:t.activeIncidents===0?"success":t.activeIncidents<=2?"warning":"error",onClick:()=>i("/ipc/incidents")}),e.jsx(R,{title:"Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ†",value:t.immunizationRate,icon:e.jsx(K,{size:24}),color:t.immunizationRate>=90?"success":"warning",onClick:()=>i("/ipc/immunizations")}),e.jsx(R,{title:"Ù…ØªØ§Ø¨Ø¹Ø§Øª Ù…Ø¹Ù„Ù‚Ø©",value:t.pendingFollowups,unit:"ØªÙØªÙŠØ´",icon:e.jsx(J,{size:24}),color:t.pendingFollowups<=3?"info":"warning"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-emerald-600"}),"Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ (Ø¢Ø®Ø± 4 Ø£Ø³Ø§Ø¨ÙŠØ¹)"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[e.jsx(W,{className:"w-4 h-4 inline ml-1"}),new Date().toLocaleDateString("ar-SA")]})]}),e.jsx($e,{data:r})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-emerald-600"}),"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>i("/ipc/inspection"),className:"p-4 bg-emerald-50 rounded-xl text-emerald-700 hover:bg-emerald-100 transition-colors flex flex-col items-center gap-2",children:[e.jsx(J,{size:32}),e.jsx("span",{className:"font-medium",children:"Ø¬ÙˆÙ„Ø© ØªÙØªÙŠØ´"})]}),e.jsxs("button",{onClick:()=>i("/ipc/incident/new"),className:"p-4 bg-red-50 rounded-xl text-red-700 hover:bg-red-100 transition-colors flex flex-col items-center gap-2",children:[e.jsx(P,{size:32}),e.jsx("span",{className:"font-medium",children:"Ø¥Ø¨Ù„Ø§Øº Ø­Ø§Ø¯Ø«Ø©"})]}),e.jsxs("button",{onClick:()=>i("/ipc/immunizations"),className:"p-4 bg-blue-50 rounded-xl text-blue-700 hover:bg-blue-100 transition-colors flex flex-col items-center gap-2",children:[e.jsx(K,{size:32}),e.jsx("span",{className:"font-medium",children:"Ø³Ø¬Ù„ Ø§Ù„ØªØ­ØµÙŠÙ†Ø§Øª"})]}),e.jsxs("button",{onClick:()=>i("/ipc/analytics"),className:"p-4 bg-purple-50 rounded-xl text-purple-700 hover:bg-purple-100 transition-colors flex flex-col items-center gap-2",children:[e.jsx(ce,{size:32}),e.jsx("span",{className:"font-medium",children:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª"})]})]})]})]}),t&&t.activeIncidents>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-red-800",children:["ÙŠÙˆØ¬Ø¯ ",t.activeIncidents," Ø­Ø§Ù„Ø© Ø¹Ø¯ÙˆÙ‰ Ù†Ø´Ø·Ø©"]}),e.jsx("p",{className:"text-red-600 text-sm",children:"ØªØªØ·Ù„Ø¨ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØ§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©"})]})]}),e.jsx("button",{onClick:()=>i("/ipc/incidents"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø§Øª"})]})]})},Be={"5_moments":{label:"Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø®Ù…Ø³ Ù„Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø£ÙŠØ¯ÙŠ",icon:"ğŸ–ï¸"},supplies:{label:"Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª",icon:"ğŸ§´"},ppe:{label:"Ù…Ø¹Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ©",icon:"ğŸ§¤"},waste:{label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ÙØ§ÙŠØ§Øª",icon:"ğŸ—‘ï¸"},environment:{label:"Ø§Ù„Ø¨ÙŠØ¦Ø©",icon:"ğŸ¥"}},cs=()=>{const i=D(),[o,c]=a.useState([]),[t,p]=a.useState([]),[r,d]=a.useState(""),[g,w]=a.useState("ØµØ¨Ø§Ø­ÙŠ"),[x,E]=a.useState([]),[I,L]=a.useState(""),[y,T]=a.useState(""),[u,n]=a.useState(""),[j,_]=a.useState(!0),[A,$]=a.useState(!1),[C,B]=a.useState(0),[k,V]=a.useState(0);a.useEffect(()=>{(async()=>{_(!0);try{const[m,h]=await Promise.all([v.getLocations(),v.getChecklistTemplates()]);if(c(m),p(h),h.length>0){const b=h[0],S=Object.entries(b.checklist_items).map(([N,s])=>({id:N,label:s.ar,category:s.category,weight:s.weight,isCompliant:null}));E(S)}}finally{_(!1)}})()},[]),a.useEffect(()=>{const l=x.filter(h=>h.isCompliant!==null),m=x.filter(h=>h.isCompliant===!0);if(V(l.length),l.length>0){const h=x.reduce((S,N)=>S+N.weight,0),b=m.reduce((S,N)=>S+N.weight,0);B(Math.round(b/h*100))}else B(0)},[x]);const F=a.useCallback((l,m)=>{E(h=>h.map(b=>b.id===l?{...b,isCompliant:m}:b))},[]),q=async()=>{if(!r){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹");return}if(!u.trim()){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ´");return}if(!(k<x.length&&!confirm(`Ù„Ù… ØªÙØ¬Ø¨ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯ (${k}/${x.length}). Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`))){$(!0);try{const l=x.reduce((h,b)=>({...h,[b.id]:b.isCompliant}),{});(await v.saveInspection({inspector_name:u,location_id:r,shift:g,checklist_data:l,non_compliance_details:I||void 0,corrective_actions:y||void 0,inspection_date:new Date().toISOString().split("T")[0],inspection_time:new Date().toTimeString().split(" ")[0]})).success?(alert("âœ… ØªÙ… Ø­ÙØ¸ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙØªÙŠØ´ Ø¨Ù†Ø¬Ø§Ø­"),i("/ipc")):alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸")}catch(l){console.error("Error:",l),alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸")}finally{$(!1)}}},U=Object.entries(Be).map(([l,m])=>({category:l,...m,items:x.filter(h=>h.category===l)})).filter(l=>l.items.length>0),G=()=>C>=85?"text-green-600 border-green-500":C>=60?"text-yellow-600 border-yellow-500":"text-red-600 border-red-500";return j?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"w-8 h-8 animate-spin text-emerald-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙØªÙŠØ´..."})]})}):e.jsxs("div",{className:"max-w-3xl mx-auto p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[e.jsx("div",{className:"bg-gradient-to-l from-emerald-600 via-emerald-700 to-teal-800 rounded-2xl p-6 mb-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i("/ipc"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx(H,{className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Ø¬ÙˆÙ„Ø© Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰"}),e.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„ÙŠÙˆÙ…ÙŠ - Ù…Ø¹Ø§ÙŠÙŠØ± BICSL"})]})]}),e.jsxs("div",{className:`flex flex-col items-center justify-center w-20 h-20 rounded-full border-4 bg-white ${G()}`,children:[e.jsx("span",{className:"text-2xl font-bold",children:C}),e.jsx("span",{className:"text-xs",children:"%"})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:["Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ´ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:u,onChange:l=>n(l.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[e.jsx(re,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ù…ÙˆÙ‚Ø¹ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r,onChange:l=>d(l.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none bg-white",children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ --"}),o.map(l=>e.jsxs("option",{value:l.id,children:[l.is_high_risk&&"âš ï¸ ",l.name]},l.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Ø§Ù„ÙˆØ±Ø¯ÙŠØ©"}),e.jsx("div",{className:"flex gap-2",children:["ØµØ¨Ø§Ø­ÙŠ","Ù…Ø³Ø§Ø¦ÙŠ","Ù„ÙŠÙ„ÙŠ"].map(l=>e.jsx("button",{onClick:()=>w(l),className:`flex-1 py-3 px-2 rounded-xl font-medium transition-all text-sm ${g===l?"bg-emerald-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-emerald-50"}`,children:l},l))})]})]})}),e.jsx("div",{className:"space-y-4 mb-6",children:U.map(l=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-emerald-50 px-5 py-3 border-b border-emerald-100",children:e.jsxs("h3",{className:"font-bold text-emerald-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:l.icon}),l.label]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:l.items.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-gray-700 flex-1 ml-4",children:m.label}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(m.id,!0),className:`p-2.5 rounded-full transition-all duration-200 ${m.isCompliant===!0?"bg-green-500 text-white ring-2 ring-offset-2 ring-green-500 scale-110":"bg-gray-100 text-gray-400 hover:bg-green-100 hover:text-green-600"}`,title:"Ù…Ù…ØªØ«Ù„",children:e.jsx(fe,{size:22})}),e.jsx("button",{onClick:()=>F(m.id,!1),className:`p-2.5 rounded-full transition-all duration-200 ${m.isCompliant===!1?"bg-red-500 text-white ring-2 ring-offset-2 ring-red-500 scale-110":"bg-gray-100 text-gray-400 hover:bg-red-100 hover:text-red-600"}`,title:"ØºÙŠØ± Ù…Ù…ØªØ«Ù„",children:e.jsx(ye,{size:22})})]})]},m.id))})]},l.category))}),C<100&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:[e.jsxs("label",{className:"block text-gray-700 font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-yellow-500"}),"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª"]}),e.jsx("textarea",{value:I,onChange:l=>L(l.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none min-h-[100px] resize-none",placeholder:"ØµÙ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ù…ÙƒØªØ´ÙØ© Ø¨Ø§Ù„ØªÙØµÙŠÙ„..."}),e.jsx("label",{className:"block text-gray-700 font-semibold mb-2 mt-4",children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ÙŠØ© Ø§Ù„ÙÙˆØ±ÙŠØ©"}),e.jsx("textarea",{value:y,onChange:l=>T(l.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none min-h-[80px] resize-none",placeholder:"Ù…Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø§ØªØ®Ø§Ø°Ù‡Ø§ ÙÙˆØ±Ø§Ù‹ØŸ"}),e.jsxs("button",{className:"flex items-center gap-2 text-emerald-600 hover:text-emerald-700 transition-colors font-medium mt-4",children:[e.jsx(Ne,{size:20}),e.jsx("span",{children:"Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ± ØªÙˆØ«ÙŠÙ‚ÙŠØ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm sticky bottom-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"ØªÙ‚Ø¯Ù… Ø§Ù„ØªÙØªÙŠØ´"}),e.jsxs("span",{children:[k," / ",x.length," Ø¨Ù†Ø¯"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${k/x.length*100}%`}})})]}),e.jsx("button",{onClick:q,disabled:A||!r||!u.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-4 px-6 rounded-xl shadow-md hover:shadow-lg transform active:scale-[0.98] transition-all flex items-center justify-center gap-3",children:A?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:20}),e.jsx("span",{children:"Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"})]})})]})]})},Fe=[{value:"infection_confirmed",label:"Ø¹Ø¯ÙˆÙ‰ Ù…Ø¤ÙƒØ¯Ø©",icon:"ğŸ¦ ",color:"red"},{value:"infection_suspected",label:"Ø§Ø´ØªØ¨Ø§Ù‡ Ø¹Ø¯ÙˆÙ‰",icon:"ğŸ”",color:"yellow"},{value:"needle_stick",label:"ÙˆØ®Ø² Ø¥Ø¨Ø±Ø© (NSI)",icon:"ğŸ’‰",color:"orange"},{value:"blood_exposure",label:"ØªØ¹Ø±Ø¶ Ù„Ù„Ø¯Ù…/Ø³ÙˆØ§Ø¦Ù„",icon:"ğŸ©¸",color:"red"},{value:"outbreak_alert",label:"ØªÙ†Ø¨ÙŠÙ‡ ØªÙØ´ÙŠ",icon:"âš ï¸",color:"red"},{value:"colonization",label:"Ø§Ø³ØªØ¹Ù…Ø§Ø± Ù…ÙŠÙƒØ±ÙˆØ¨ÙŠ",icon:"ğŸ§«",color:"blue"}],Oe=[{value:"mild",label:"Ø®ÙÙŠÙ",color:"bg-green-100 text-green-700 border-green-300"},{value:"moderate",label:"Ù…ØªÙˆØ³Ø·",color:"bg-yellow-100 text-yellow-700 border-yellow-300"},{value:"severe",label:"Ø´Ø¯ÙŠØ¯",color:"bg-orange-100 text-orange-700 border-orange-300"},{value:"critical",label:"Ø­Ø±Ø¬",color:"bg-red-100 text-red-700 border-red-300"}],xe=[{value:"beneficiary",label:"Ù…Ø³ØªÙÙŠØ¯",icon:"ğŸ‘¤"},{value:"staff",label:"Ù…ÙˆØ¸Ù",icon:"ğŸ‘¨â€âš•ï¸"},{value:"visitor",label:"Ø²Ø§Ø¦Ø±",icon:"ğŸš¶"}],Me=["ØªÙ†ÙØ³ÙŠ","Ø¨ÙˆÙ„ÙŠ","Ø¬Ù„Ø¯ÙŠ","Ø¯Ù…","Ø¬Ù‡Ø§Ø² Ù‡Ø¶Ù…ÙŠ","Ø¹ÙŠÙ†","Ø£Ø°Ù†","Ø¬Ø±Ø­","Ø£Ø®Ø±Ù‰"],Re=["Ø­Ù…Ù‰","Ø³Ø¹Ø§Ù„","Ø¥Ø³Ù‡Ø§Ù„","Ù‚ÙŠØ¡","ØµØ¯Ø§Ø¹","Ø·ÙØ­ Ø¬Ù„Ø¯ÙŠ","Ø£Ù„Ù… Ø¨Ø·Ù†","Ø¶ÙŠÙ‚ ØªÙ†ÙØ³","Ø§Ù„ØªÙ‡Ø§Ø¨ Ø­Ù„Ù‚","Ø§Ø­Ù…Ø±Ø§Ø±","ØªÙˆØ±Ù…","Ø¥ÙØ±Ø§Ø²Ø§Øª"],Pe=["Ø¹Ø²Ù„ Ø§Ù„Ù…ØµØ§Ø¨","Ø¥Ø¨Ù„Ø§Øº Ø§Ù„Ø·Ø¨ÙŠØ¨","Ø£Ø®Ø° Ø¹ÙŠÙ†Ø§Øª Ù…Ø®Ø¨Ø±ÙŠØ©","ØªØ·Ù‡ÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©","Ø¥Ø¨Ù„Ø§Øº Ù…Ø´Ø±Ù Ø§Ù„Ù‚Ø³Ù…","ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø­Ø§Ø¯Ø«Ø©","ÙØ­Øµ Ø§Ù„Ù…Ø®Ø§Ù„Ø·ÙŠÙ†","ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·Ø§Øª"],os=()=>{var N;const i=D(),[o,c]=a.useState(""),[t,p]=a.useState(""),[r,d]=a.useState(""),[g,w]=a.useState(""),[x,E]=a.useState(""),[I,L]=a.useState(""),[y,T]=a.useState([]),[u,n]=a.useState("mild"),[j,_]=a.useState(""),[A,$]=a.useState([]),[C,B]=a.useState(!1),[k,V]=a.useState(""),[F,q]=a.useState([]),[U,G]=a.useState(!0),[l,m]=a.useState(!1);a.useEffect(()=>{(async()=>{const f=await v.getLocations();q(f),G(!1)})()},[]);const h=s=>{T(f=>f.includes(s)?f.filter(X=>X!==s):[...f,s])},b=s=>{$(f=>f.includes(s)?f.filter(X=>X!==s):[...f,s])},S=async()=>{if(!o){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯Ø«Ø©");return}if(!t){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…ØªØ£Ø«Ø±");return}if(!g.trim()){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙØ¨Ù„ÙÙ‘Øº");return}m(!0);try{const s=await v.saveIncident({incident_category:o,affected_type:t,reported_by:g,location_id:x||void 0,infection_site:I||void 0,symptoms:y,severity_level:u,onset_date:j||void 0,immediate_actions:A,isolation_required:C,investigation_notes:k||void 0,status:"open",detection_date:new Date().toISOString().split("T")[0]});s.success?(alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø§Ø¯Ø«Ø© Ø¨Ù†Ø¬Ø§Ø­ - Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹: "+s.id),i("/ipc")):alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„")}catch(s){console.error(s),alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„")}finally{m(!1)}};return U?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsx(Y,{className:"w-8 h-8 animate-spin text-red-600"})}):e.jsxs("div",{className:"max-w-3xl mx-auto p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[e.jsx("div",{className:"bg-gradient-to-l from-red-600 via-red-700 to-rose-800 rounded-2xl p-6 mb-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i("/ipc"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx(ie,{className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø­Ø§Ø¯Ø«Ø© Ø¹Ø¯ÙˆÙ‰"}),e.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ ÙˆØªÙˆØ«ÙŠÙ‚ Ø­ÙˆØ§Ø¯Ø« Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:[e.jsxs("label",{className:"block text-gray-700 font-bold mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-red-500"}),"Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯Ø«Ø© ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Fe.map(s=>e.jsxs("button",{onClick:()=>c(s.value),className:`p-4 rounded-xl border-2 transition-all text-right ${o===s.value?"border-red-500 bg-red-50 ring-2 ring-red-200":"border-gray-200 hover:border-red-300 hover:bg-red-50"}`,children:[e.jsx("span",{className:"text-2xl block mb-1",children:s.icon}),e.jsx("span",{className:"font-medium text-gray-700",children:s.label})]},s.value))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:[e.jsxs("label",{className:"block text-gray-700 font-bold mb-3 flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-blue-500"}),"Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…ØªØ£Ø«Ø± ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-3 mb-4",children:xe.map(s=>e.jsxs("button",{onClick:()=>p(s.value),className:`flex-1 p-3 rounded-xl border-2 transition-all ${t===s.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("span",{className:"text-xl ml-2",children:s.icon}),e.jsx("span",{className:"font-medium",children:s.label})]},s.value))}),t&&e.jsx("input",{type:"text",value:r,onChange:s=>d(s.target.value),placeholder:`Ø§Ø³Ù… ${(N=xe.find(s=>s.value===t))==null?void 0:N.label}`,className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsx("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-bold mb-2 flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-green-500"}),"Ø§Ù„Ù…ÙˆÙ‚Ø¹"]}),e.jsxs("select",{value:x,onChange:s=>E(s.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 outline-none bg-white",children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ --"}),F.map(s=>e.jsxs("option",{value:s.id,children:[s.is_high_risk&&"âš ï¸ ",s.name]},s.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-bold mb-2 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-purple-500"}),"Ø§Ø³Ù… Ø§Ù„Ù…ÙØ¨Ù„ÙÙ‘Øº ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:g,onChange:s=>w(s.target.value),placeholder:"Ø§Ø³Ù…Ùƒ",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:[e.jsxs("label",{className:"block text-gray-700 font-bold mb-3 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-orange-500"}),"Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ±ÙŠØ©"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-600 text-sm mb-2",children:"Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ø¯ÙˆÙ‰"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Me.map(s=>e.jsx("button",{onClick:()=>L(s),className:`px-3 py-1.5 rounded-full text-sm transition-all ${I===s?"bg-orange-500 text-white":"bg-gray-100 text-gray-600 hover:bg-orange-100"}`,children:s},s))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-600 text-sm mb-2",children:"Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ (Ø§Ø®ØªØ± Ù…Ø§ ÙŠÙ†Ø·Ø¨Ù‚)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Re.map(s=>e.jsx("button",{onClick:()=>h(s),className:`px-3 py-1.5 rounded-full text-sm transition-all ${y.includes(s)?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-red-100"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-600 text-sm mb-2 flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),"ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶"]}),e.jsx("input",{type:"date",value:j,onChange:s=>_(s.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 text-sm mb-2",children:"Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø´Ø¯Ø©"}),e.jsx("div",{className:"flex gap-2",children:Oe.map(s=>e.jsx("button",{onClick:()=>n(s.value),className:`flex-1 py-2 px-2 rounded-xl text-sm font-medium border transition-all ${u===s.value?s.color+" ring-2 ring-offset-1":"bg-gray-50 text-gray-500 border-gray-200"}`,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:[e.jsxs("label",{className:"block text-gray-700 font-bold mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-green-500"}),"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ© Ø§Ù„Ù…ØªØ®Ø°Ø©"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Pe.map(s=>e.jsx("button",{onClick:()=>b(s),className:`px-3 py-2 rounded-xl text-sm transition-all border ${A.includes(s)?"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-200 hover:border-green-300"}`,children:s},s))}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-yellow-50 rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:s=>B(s.target.checked),className:"w-5 h-5 rounded text-yellow-500 focus:ring-yellow-500"}),e.jsx("span",{className:"font-medium text-yellow-800",children:"ÙŠØªØ·Ù„Ø¨ Ø¹Ø²Ù„ ÙÙˆØ±ÙŠ"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 shadow-sm",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"}),e.jsx("textarea",{value:k,onChange:s=>V(s.target.value),placeholder:"Ø£ÙŠ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù† Ø§Ù„Ø­Ø§Ø¯Ø«Ø©...",className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-400 outline-none min-h-[100px] resize-none"})]}),e.jsx("button",{onClick:S,disabled:l,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-300 text-white font-bold py-4 px-6 rounded-xl shadow-md flex items-center justify-center gap-3 sticky bottom-4",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:20}),e.jsx("span",{children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø§Ø¯Ø«Ø©"})]})})]})},me=[{id:"1",person_type:"staff",staff_name:"Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",vaccine_code:"HBV",vaccine_name:"Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„ÙƒØ¨Ø¯ B",dose_number:3,total_doses:3,date_administered:"2025-06-15",immunity_status:"immune",adverse_reaction:!1},{id:"2",person_type:"staff",staff_name:"ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ",vaccine_code:"HBV",vaccine_name:"Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„ÙƒØ¨Ø¯ B",dose_number:2,total_doses:3,date_administered:"2025-09-01",next_due_date:"2026-03-01",immunity_status:"pending",adverse_reaction:!1},{id:"3",person_type:"staff",staff_name:"Ø®Ø§Ù„Ø¯ Ø³Ø¹Ø¯",vaccine_code:"FLU",vaccine_name:"Ø§Ù„Ø¥Ù†ÙÙ„ÙˆÙ†Ø²Ø§",dose_number:1,total_doses:1,date_administered:"2025-10-15",immunity_status:"immune",adverse_reaction:!1},{id:"4",person_type:"beneficiary",beneficiary_id:"b1",vaccine_code:"COVID",vaccine_name:"ÙƒÙˆÙÙŠØ¯-19",dose_number:2,total_doses:2,date_administered:"2025-04-20",immunity_status:"immune",adverse_reaction:!1},{id:"5",person_type:"staff",staff_name:"Ù†ÙˆØ±Ø© Ø£Ø­Ù…Ø¯",vaccine_code:"HBV",vaccine_name:"Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„ÙƒØ¨Ø¯ B",dose_number:1,total_doses:3,date_administered:"2025-11-01",next_due_date:"2026-01-01",immunity_status:"pending",adverse_reaction:!1},{id:"6",person_type:"staff",staff_name:"Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ",vaccine_code:"TDAP",vaccine_name:"Ø§Ù„ÙƒØ²Ø§Ø²",dose_number:1,total_doses:1,date_administered:"2024-06-01",immunity_status:"expired",adverse_reaction:!1}],He=({status:i})=>{const o={immune:"bg-green-100 text-green-700 border-green-300",pending:"bg-yellow-100 text-yellow-700 border-yellow-300",expired:"bg-red-100 text-red-700 border-red-300",non_responder:"bg-gray-100 text-gray-700 border-gray-300",declined:"bg-gray-100 text-gray-600 border-gray-300"},c={immune:"âœ… Ù…Ø­ØµÙ‘Ù†",pending:"â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„",expired:"âš ï¸ Ù…Ù†ØªÙ‡ÙŠ",non_responder:"ØºÙŠØ± Ù…Ø³ØªØ¬ÙŠØ¨",declined:"Ø±ÙØ¶"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm border ${o[i]||o.pending}`,children:c[i]||i})},ds=()=>{const i=D(),[o,c]=a.useState(!0),[t,p]=a.useState([]),[r,d]=a.useState("all"),[g,w]=a.useState("all"),[x,E]=a.useState(""),[I,L]=a.useState(!1);a.useEffect(()=>{y()},[]);const y=async()=>{c(!0);try{const n=await v.getImmunizations();p(n.length>0?n:me)}catch{p(me)}finally{c(!1)}},T=t.filter(n=>!(r!=="all"&&n.person_type!==r||g!=="all"&&n.immunity_status!==g||x&&!(n.staff_name||n.beneficiary_id||"").toLowerCase().includes(x.toLowerCase()))),u={total:t.length,immune:t.filter(n=>n.immunity_status==="immune").length,pending:t.filter(n=>n.immunity_status==="pending").length,expired:t.filter(n=>n.immunity_status==="expired").length,dueThisMonth:t.filter(n=>{if(!n.next_due_date)return!1;const j=new Date(n.next_due_date),_=new Date;return j.getMonth()===_.getMonth()&&j.getFullYear()===_.getFullYear()}).length};return o?e.jsx(le,{fullScreen:!0,message:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„ØªØ­ØµÙŠÙ†Ø§Øª..."}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i("/ipc"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(K,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Ø³Ø¬Ù„ Ø§Ù„ØªØ­ØµÙŠÙ†Ø§Øª"}),e.jsx("p",{className:"text-gray-500",children:"Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø¹Ø© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"ØªØ­Ø¯ÙŠØ«"]}),e.jsxs("button",{onClick:()=>L(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-md",children:[e.jsx(ge,{className:"w-4 h-4"}),"ØªØ³Ø¬ÙŠÙ„ ØªØ­ØµÙŠÙ†"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border-r-4 border-blue-500",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:u.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border-r-4 border-green-500",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù…Ø­ØµÙ‘Ù† Ø¨Ø§Ù„ÙƒØ§Ù…Ù„"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.immune})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border-r-4 border-yellow-500",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù‚ÙŠØ¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:u.pending})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border-r-4 border-red-500",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.expired})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border-r-4 border-orange-500",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù…Ø³ØªØ­Ù‚ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:u.dueThisMonth})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 mb-6 shadow-sm flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(_e,{className:"w-5 h-5 absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…...",value:x,onChange:n=>E(n.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-lg transition-all ${r==="all"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:"Ø§Ù„ÙƒÙ„"}),e.jsxs("button",{onClick:()=>d("staff"),className:`px-4 py-2 rounded-lg transition-all flex items-center gap-1 ${r==="staff"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Ce,{className:"w-4 h-4"}),"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"]}),e.jsxs("button",{onClick:()=>d("beneficiary"),className:`px-4 py-2 rounded-lg transition-all flex items-center gap-1 ${r==="beneficiary"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:[e.jsx(be,{className:"w-4 h-4"}),"Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†"]})]}),e.jsxs("select",{value:g,onChange:n=>w(n.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),e.jsx("option",{value:"immune",children:"Ù…Ø­ØµÙ‘Ù†"}),e.jsx("option",{value:"pending",children:"Ù‚ÙŠØ¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„"}),e.jsx("option",{value:"expired",children:"Ù…Ù†ØªÙ‡ÙŠ"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold text-gray-600",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-gray-600",children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-gray-600",children:"Ø§Ù„Ù„Ù‚Ø§Ø­"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-gray-600",children:"Ø§Ù„Ø¬Ø±Ø¹Ø©"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ·Ø¹ÙŠÙ…"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-gray-600",children:"Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-gray-600",children:"Ø§Ù„Ø­Ø§Ù„Ø©"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:T.map(n=>{var j;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:n.staff_name||`Ù…Ø³ØªÙÙŠØ¯ #${(j=n.beneficiary_id)==null?void 0:j.slice(-4)}`}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${n.person_type==="staff"?"bg-purple-100 text-purple-700":"bg-teal-100 text-teal-700"}`,children:n.person_type==="staff"?"Ù…ÙˆØ¸Ù":"Ù…Ø³ØªÙÙŠØ¯"})}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:n.vaccine_name}),e.jsxs("td",{className:"px-4 py-3 text-gray-600",children:[n.dose_number,"/",n.total_doses]}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:n.date_administered}),e.jsx("td",{className:"px-4 py-3",children:n.next_due_date?e.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[e.jsx(W,{className:"w-4 h-4"}),n.next_due_date]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(He,{status:n.immunity_status})})]},n.id)})})]})}),T.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©"})]})]})]})},Ke=[{week:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1",compliance:82,incidents:4,inspections:12},{week:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 2",compliance:85,incidents:3,inspections:14},{week:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3",compliance:84,incidents:2,inspections:15},{week:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4",compliance:87,incidents:2,inspections:16},{week:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 5",compliance:89,incidents:1,inspections:14},{week:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 6",compliance:91,incidents:1,inspections:15}],he=[{name:"Ø¹Ø¯ÙˆÙ‰ ØªÙ†ÙØ³ÙŠØ©",value:35,color:"#DC2626"},{name:"Ø¹Ø¯ÙˆÙ‰ Ø¨ÙˆÙ„ÙŠØ©",value:25,color:"#F59E0B"},{name:"Ø¹Ø¯ÙˆÙ‰ Ø¬Ù„Ø¯ÙŠØ©",value:20,color:"#0EA5E9"},{name:"ÙˆØ®Ø² Ø¥Ø¨Ø±Ø©",value:12,color:"#8B5CF6"},{name:"Ø£Ø®Ø±Ù‰",value:8,color:"#6B7280"}],te=[{location:"Ø¬Ù†Ø§Ø­ Ø§Ù„Ø°ÙƒÙˆØ± 1",compliance:92,risk:"low"},{location:"Ø¬Ù†Ø§Ø­ Ø§Ù„Ø°ÙƒÙˆØ± 2",compliance:88,risk:"low"},{location:"Ø¬Ù†Ø§Ø­ Ø§Ù„Ø¥Ù†Ø§Ø«",compliance:85,risk:"medium"},{location:"Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø·Ø¨ÙŠØ©",compliance:78,risk:"high"},{location:"Ø§Ù„Ù…Ø·Ø¨Ø®",compliance:95,risk:"low"},{location:"ØºØ±ÙØ© Ø§Ù„Ø¹Ø²Ù„",compliance:98,risk:"low"}],Ye=[{month:"ÙŠÙˆÙ„ÙŠÙˆ",handHygiene:75,ppe:80,waste:85},{month:"Ø£ØºØ³Ø·Ø³",handHygiene:78,ppe:82,waste:87},{month:"Ø³Ø¨ØªÙ…Ø¨Ø±",handHygiene:82,ppe:85,waste:88},{month:"Ø£ÙƒØªÙˆØ¨Ø±",handHygiene:85,ppe:88,waste:90},{month:"Ù†ÙˆÙÙ…Ø¨Ø±",handHygiene:88,ppe:90,waste:92},{month:"Ø¯ÙŠØ³Ù…Ø¨Ø±",handHygiene:91,ppe:92,waste:94}],ae=({active:i,payload:o,label:c})=>i&&o&&o.length?e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border text-right",style:{direction:"rtl"},children:[e.jsx("p",{className:"font-bold text-gray-800 mb-1",children:c}),o.map((t,p)=>e.jsxs("p",{style:{color:t.color},className:"text-sm",children:[t.name,": ",t.value,typeof t.value=="number"&&t.value<=100?"%":""]},p))]}):null,xs=()=>{const i=D(),[o,c]=a.useState(!0),[t,p]=a.useState("month");return a.useEffect(()=>{setTimeout(()=>c(!1),500)},[]),o?e.jsx(le,{fullScreen:!0,message:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª..."}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i("/ipc"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(ke,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"ØªØ­Ù„ÙŠÙ„Ø§Øª Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰"}),e.jsx("p",{className:"text-gray-500",children:"Ø±Ø¤Ù‰ Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆÙ…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡"})]})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{className:"flex gap-1 bg-white rounded-lg p-1 shadow-sm",children:["week","month","quarter","year"].map(r=>e.jsx("button",{onClick:()=>p(r),className:`px-3 py-1.5 rounded-md text-sm transition-all ${t===r?"bg-purple-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:r==="week"?"Ø£Ø³Ø¨ÙˆØ¹":r==="month"?"Ø´Ù‡Ø±":r==="quarter"?"Ø±Ø¨Ø¹":"Ø³Ù†Ø©"},r))}),e.jsxs("button",{className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"ØªØ­Ø¯ÙŠØ«"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-emerald-600"}),"Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"]}),e.jsx(O,{width:"100%",height:280,children:e.jsxs(Ee,{data:Ke,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCompliance",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#22C55E",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#22C55E",stopOpacity:0})]})}),e.jsx(Z,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),e.jsx(Q,{dataKey:"week",tick:{fontSize:12}}),e.jsx(ee,{domain:[70,100],tick:{fontSize:12}}),e.jsx(M,{content:e.jsx(ae,{})}),e.jsx(Ie,{type:"monotone",dataKey:"compliance",stroke:"#22C55E",strokeWidth:3,fill:"url(#colorCompliance)",name:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-red-600"}),"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹"]}),e.jsx(O,{width:"100%",height:280,children:e.jsxs(Te,{children:[e.jsx(Le,{data:he,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:3,dataKey:"value",label:({name:r,percent:d})=>`${r} ${(d*100).toFixed(0)}%`,labelLine:!1,children:he.map((r,d)=>e.jsx(oe,{fill:r.color},`cell-${d}`))}),e.jsx(M,{}),e.jsx(de,{})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-blue-600"}),"Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹"]}),e.jsx(O,{width:"100%",height:280,children:e.jsxs(Ae,{data:te,layout:"vertical",children:[e.jsx(Z,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),e.jsx(Q,{type:"number",domain:[0,100],tick:{fontSize:12}}),e.jsx(ee,{dataKey:"location",type:"category",width:100,tick:{fontSize:11}}),e.jsx(M,{content:e.jsx(ae,{})}),e.jsx(De,{dataKey:"compliance",name:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„",radius:[0,4,4,0],children:te.map((r,d)=>e.jsx(oe,{fill:r.compliance>=90?"#22C55E":r.compliance>=80?"#F59E0B":"#DC2626"},`cell-${d}`))})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-orange-600"}),"Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©"]}),e.jsx(O,{width:"100%",height:280,children:e.jsxs(ze,{data:Ye,children:[e.jsx(Z,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),e.jsx(Q,{dataKey:"month",tick:{fontSize:12}}),e.jsx(ee,{domain:[70,100],tick:{fontSize:12}}),e.jsx(M,{content:e.jsx(ae,{})}),e.jsx(de,{}),e.jsx(se,{type:"monotone",dataKey:"handHygiene",stroke:"#0EA5E9",strokeWidth:2,dot:{fill:"#0EA5E9",r:4},name:"Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø£ÙŠØ¯ÙŠ"}),e.jsx(se,{type:"monotone",dataKey:"ppe",stroke:"#8B5CF6",strokeWidth:2,dot:{fill:"#8B5CF6",r:4},name:"Ù…Ø¹Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Ø§ÙŠØ©"}),e.jsx(se,{type:"monotone",dataKey:"waste",stroke:"#F59E0B",strokeWidth:2,dot:{fill:"#F59E0B",r:4},name:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ÙØ§ÙŠØ§Øª"})]})})]})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-yellow-600"}),"Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ø§Ù‡ØªÙ…Ø§Ù…Ø§Ù‹"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:te.filter(r=>r.compliance<85).map((r,d)=>e.jsxs("div",{className:"p-4 rounded-xl border-2 border-yellow-200 bg-yellow-50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:r.location}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Ø§Ù…ØªØ«Ø§Ù„: ",r.compliance,"%"]})]}),e.jsx("button",{className:"px-3 py-1.5 bg-yellow-500 text-white rounded-lg text-sm hover:bg-yellow-600",children:"Ø¹Ø±Ø¶"})]},d))})]})]})};export{cs as DailyIPCInspection,xs as IPCAnalytics,is as IPCDashboard,ds as ImmunizationTracker,os as IncidentReportForm};
