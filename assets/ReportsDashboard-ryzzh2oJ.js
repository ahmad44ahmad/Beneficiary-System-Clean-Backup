import{j as e,B as w,G as N,n as C,V as D,W as S,a as A,Y as _,r as k,C as g,F as I,_ as R}from"./index-BOMQ6ZnB.js";import{m as b}from"./assets-SKHdl_M4.js";const y=({title:l,subtitle:r,children:n,onPrint:d})=>{const s=()=>{d?d():window.print()};return e.jsxs("div",{className:"bg-gray-100 min-h-screen p-8 print:p-0 print:bg-white",children:[e.jsxs("div",{className:"max-w-4xl mx-auto mb-6 flex justify-between items-center print:hidden",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"معاينة التقرير"}),e.jsxs(w,{onClick:s,className:"bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(N,{className:"w-4 h-4 ml-2"}),"طباعة / تصدير PDF"]})]}),e.jsxs("div",{className:"max-w-[210mm] mx-auto bg-white shadow-lg print:shadow-none print:w-full min-h-[297mm] p-10 print:p-0 relative",children:[e.jsxs("div",{className:"border-b-2 border-gray-800 pb-6 mb-8 flex justify-between items-start",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"المملكة العربية السعودية"}),e.jsx("h2",{className:"text-base font-medium text-gray-800",children:"وزارة الموارد البشرية والتنمية الاجتماعية"}),e.jsx("h3",{className:"text-sm text-gray-600",children:"مركز التأهيل الشامل (قسم الذكور)"})]}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-xs text-gray-500",children:"شعار الوزارة"})})}),e.jsxs("div",{className:"text-left text-sm text-gray-600",children:[e.jsxs("p",{children:["التاريخ: ",new Date().toLocaleDateString("ar-SA")]}),e.jsxs("p",{children:["رقم التقرير: REF-",Math.floor(Math.random()*1e4)]})]})]}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 underline decoration-2 underline-offset-8",children:l}),r&&e.jsx("p",{className:"text-gray-600 mt-2",children:r})]}),e.jsx("div",{className:"report-content",children:n}),e.jsxs("div",{className:"mt-20 pt-8 border-t border-gray-300 flex justify-between items-end print:absolute print:bottom-10 print:left-0 print:right-0 print:px-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-bold mb-4",children:"مدير قسم الجودة"}),e.jsx("div",{className:"h-10 border-b border-dashed border-gray-400 w-40 mx-auto"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-bold mb-4",children:"مدير المركز"}),e.jsx("div",{className:"h-10 border-b border-dashed border-gray-400 w-40 mx-auto"})]})]})]})]})},u=[{id:"inc_01",type:"injury_staff",date:"2023-10-28",time:"14:30",location:"Kitchen",description:"Chef cut finger while chopping vegetables.",reportedBy:"Kitchen Supervisor",involvedPersons:"Chef Ahmed",immediateAction:"First aid applied; sent to clinic.",status:"closed"},{id:"inc_02",type:"near_miss",date:"2023-10-29",time:"09:00",location:"Corridor A",description:"Wheelchair brake failed on ramp, but nurse caught it.",reportedBy:"Nurse Sara",involvedPersons:"Beneficiary 1401",immediateAction:"Wheelchair sent to maintenance.",status:"investigating"}],h=[{id:"aud_2023_Q4",title:"Q4 Internal Quality Audit (ISO 9001)",auditorName:"Quality Officer",date:"2023-11-01",scope:"Medical & Rehab Departments",status:"in_progress",findings:[{id:"f1",auditId:"aud_2023_Q4",area:"Clinic",criterion:"Medication Storage Temperature Log",isCompliant:!0,evidence:"Logs are up to date."},{id:"f2",auditId:"aud_2023_Q4",area:"Rehab",criterion:"Individual Plans Signed by Director",isCompliant:!1,severity:"minor",evidence:"3 out of 10 plans missing signature."}]}],j=[{id:"capa_01",auditId:"aud_2023_Q4",description:"Ensure all Rehab Plans are signed within 48 hours.",assignedTo:"Rehab Director",dueDate:"2023-11-05",status:"open"},{id:"capa_02",incidentId:"inc_02",description:"Inspect all wheelchair brakes weekly.",assignedTo:"Maintenance Head",dueDate:"2023-11-01",status:"in_progress",rootCause:"Wear and tear not detected in monthly check.",actionTaken:"Updated checklist to weekly frequency."}],O=()=>{const l=h.reduce((s,a)=>s+a.findings.length,0),r=h.reduce((s,a)=>s+a.findings.filter(x=>x.isCompliant).length,0),n=Math.round(r/l*100),d=j.filter(s=>s.status!=="closed").length;return e.jsxs(y,{title:"تقرير الامتثال لمعيار ISO 9001:2015",subtitle:"تقرير التدقيق الداخلي وحالة الإجراءات التصحيحية",children:[e.jsxs("div",{className:"mb-8 p-4 bg-gray-50 border rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4 border-b pb-2",children:"الملخص التنفيذي"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"نسبة الامتثال العام"}),e.jsxs("p",{className:`text-2xl font-bold ${n>=85?"text-green-600":"text-red-600"}`,children:[n,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"عدد حالات عدم المطابقة"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:l-r})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"الإجراءات التصحيحية المفتوحة"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"1. تفاصيل التدقيق الداخلي"}),h.map(s=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-gray-100 p-2 rounded-t-lg flex justify-between text-sm font-bold",children:[e.jsx("span",{children:s.title}),e.jsx("span",{children:s.date})]}),e.jsxs("table",{className:"w-full text-sm border border-t-0",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-right",children:"المجال / القسم"}),e.jsx("th",{className:"border p-2 text-right",children:"المعيار (ISO Clause)"}),e.jsx("th",{className:"border p-2 text-center",children:"الحالة"}),e.jsx("th",{className:"border p-2 text-right",children:"الدليل / الملاحظات"})]})}),e.jsx("tbody",{children:s.findings.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:a.area}),e.jsx("td",{className:"border p-2",children:a.criterion}),e.jsx("td",{className:"border p-2 text-center",children:a.isCompliant?e.jsxs("span",{className:"flex items-center justify-center gap-1 text-green-700 font-medium",children:[e.jsx(C,{className:"w-4 h-4"})," مطابق"]}):e.jsxs("span",{className:"flex items-center justify-center gap-1 text-red-700 font-medium",children:[e.jsx(D,{className:"w-4 h-4"})," غير مطابق"]})}),e.jsx("td",{className:"border p-2 text-gray-600",children:a.evidence||"-"})]},a.id))})]})]},s.id))]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"2. سجل الإجراءات التصحيحية (CAPA Log)"}),e.jsxs("table",{className:"w-full text-sm border",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-right",children:"وصف المشكلة"}),e.jsx("th",{className:"border p-2 text-right",children:"الإجراء المتخذ"}),e.jsx("th",{className:"border p-2 text-right",children:"المسؤول"}),e.jsx("th",{className:"border p-2 text-center",children:"تاريخ الاستحقاق"}),e.jsx("th",{className:"border p-2 text-center",children:"الحالة"})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:s.description}),e.jsx("td",{className:"border p-2 text-gray-600",children:s.actionTaken||"بانتظار التنفيذ"}),e.jsx("td",{className:"border p-2",children:s.assignedTo}),e.jsx("td",{className:"border p-2 text-center",children:s.dueDate}),e.jsx("td",{className:"border p-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${s.status==="closed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:s.status.toUpperCase()})})]},s.id))})]})]})]})},m=[{id:"plan_1",beneficiaryId:"1216",beneficiaryName:"عامر موسى علي عمر ال منامس عسيري",startDate:"2023-10-01",endDate:"2024-10-01",status:"active",medicalContext:{diagnosis:"Cerebral Palsy (CP)",needs:["Wheelchair"]},socialContext:{economicStatus:"Low Income",riskLevel:"high"},goals:[{id:"g1",type:"physiotherapy",title:"Improve Range of Motion (ROM)",measureOfSuccess:"Increase ROM by 10 degrees",targetDate:"2023-12-31",progress:75,status:"in_progress",assignedTo:"Dr. Ahmed"},{id:"g2",type:"social",title:"Process Prosthetic Device Request",measureOfSuccess:"Device delivered",targetDate:"2023-11-15",progress:100,status:"achieved",assignedTo:"Social Worker Sarah"}],approvals:[{role:"doctor",status:"approved",approvedBy:"Dr. Ahmed",approvedAt:"2023-10-02"},{role:"social_worker",status:"approved",approvedBy:"Sarah",approvedAt:"2023-10-03"},{role:"director",status:"approved",approvedBy:"Director",approvedAt:"2023-10-04"}]},{id:"plan_2",beneficiaryId:"1401",beneficiaryName:"لاحق يحيى شوعان علي جابر الحساني",startDate:"2023-11-01",endDate:"2024-11-01",status:"draft",medicalContext:{diagnosis:"Cerebral Palsy (CP)",needs:[]},socialContext:{economicStatus:"Average",riskLevel:"medium"},goals:[{id:"g3",type:"medical",title:"Regular Checkups",measureOfSuccess:"Monthly visits",targetDate:"2024-11-01",progress:20,status:"in_progress",assignedTo:"Dr. Khalid"}],approvals:[{role:"doctor",status:"approved",approvedBy:"Dr. Khalid",approvedAt:"2023-11-02"},{role:"social_worker",status:"pending"},{role:"director",status:"pending"}]},{id:"plan_3",beneficiaryId:"365",beneficiaryName:"ياسر صالح سعيد بريك ال بريك الغامدي",startDate:"2023-09-15",endDate:"2024-09-15",status:"active",medicalContext:{diagnosis:"Intellectual Disability",needs:["Speech Therapy"]},socialContext:{economicStatus:"Good",riskLevel:"low"},goals:[{id:"g4",type:"psychological",title:"Behavioral Therapy",measureOfSuccess:"Reduce outbursts",targetDate:"2024-03-01",progress:45,status:"in_progress",assignedTo:"Dr. Mona"},{id:"g5",type:"medical",title:"Dental Care",measureOfSuccess:"Cavity free",targetDate:"2023-12-01",progress:90,status:"in_progress",assignedTo:"Dr. Samer"}],approvals:[{role:"doctor",status:"approved",approvedBy:"Dr. Samer",approvedAt:"2023-09-16"},{role:"social_worker",status:"approved",approvedBy:"Layla",approvedAt:"2023-09-17"},{role:"director",status:"approved",approvedBy:"Director",approvedAt:"2023-09-18"}]}],P=()=>{const l=m.reduce((t,i)=>t+i.goals.length,0),r=m.reduce((t,i)=>t+i.goals.filter(c=>c.status==="achieved"||c.progress===100).length,0),n=l>0?Math.round(r/l*100):0,d=b.reduce((t,i)=>t+i.value,0),s=b.filter(t=>t.condition==="damaged").reduce((t,i)=>t+i.value,0),a=Math.round((d-s)/d*100),x=u.length,f=u.filter(t=>t.status==="closed").length,v=x>0?Math.round(f/x*100):100;return e.jsxs(y,{title:"تقرير الاستدامة والأثر الاجتماعي (SROI)",subtitle:"قياس العائد على الاستثمار الاجتماعي وكفاءة الموارد - مبادرة واحة الإحسان",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"p-6 border rounded-lg bg-green-50 text-center",children:[e.jsx(S,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-green-800",children:"الأثر الاجتماعي"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[n,"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"نسبة تحقيق أهداف التأهيل"})]}),e.jsxs("div",{className:"p-6 border rounded-lg bg-blue-50 text-center",children:[e.jsx(A,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-blue-800",children:"الكفاءة التشغيلية"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[a,"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"نسبة استغلال الأصول"})]}),e.jsxs("div",{className:"p-6 border rounded-lg bg-teal-50 text-center",children:[e.jsx(_,{className:"w-8 h-8 text-teal-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-teal-800",children:"السلامة المهنية"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[v,"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"معدل الاستجابة للحوادث"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4",children:"1. تحسين جودة الحياة (Quality of Life)"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4 text-justify leading-relaxed",children:["يعكس هذا المؤشر مدى نجاح المركز في تحويل المستفيدين من حالة الاعتماد الكلي إلى الاستقلالية النسبية عبر خطط التأهيل الفردية. تشير البيانات إلى تحقيق ",e.jsx("strong",{children:r})," هدفاً تأهيلياً من أصل ",e.jsx("strong",{children:l})," هدفاً مخططاً له خلال الفترة الحالية."]}),e.jsxs("table",{className:"w-full text-sm border",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-right",children:"نوع الهدف"}),e.jsx("th",{className:"border p-2 text-center",children:"العدد الكلي"}),e.jsx("th",{className:"border p-2 text-center",children:"تم الإنجاز"}),e.jsx("th",{className:"border p-2 text-center",children:"نسبة النجاح"})]})}),e.jsx("tbody",{children:["medical","social","psychological","physiotherapy"].map(t=>{const i=m.flatMap(o=>o.goals).filter(o=>o.type===t),c=i.length,p=i.filter(o=>o.status==="achieved"||o.progress===100).length;return e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2 font-medium capitalize",children:t}),e.jsx("td",{className:"border p-2 text-center",children:c}),e.jsx("td",{className:"border p-2 text-center",children:p}),e.jsxs("td",{className:"border p-2 text-center font-bold",children:[c>0?Math.round(p/c*100):0,"%"]})]},t)})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4",children:"2. الحوكمة المالية واستدامة الأصول"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4 text-justify leading-relaxed",children:["يهدف المركز إلى تعظيم الاستفادة من الموارد المتاحة وتقليل الهدر المالي الناتج عن سوء الاستخدام أو الأعطال. تبلغ القيمة الإجمالية للأصول المدارة ",e.jsxs("strong",{children:[d.toLocaleString()," ر.س"]}),"، مع نسبة صلاحية تشغيلية تبلغ ",e.jsxs("strong",{children:[a,"%"]}),"."]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"توصيات التحسين:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"زيادة وتيرة الصيانة الوقائية للأجهزة الطبية لتقليل فترات التوقف."}),e.jsx("li",{children:"مراجعة عقود الموردين للأصول ذات معدلات الاستهلاك العالية."}),e.jsx("li",{children:"تدريب الموظفين على التعامل الأمثل مع الأصول الجديدة."})]})]})]})]})]})},B=()=>{const[l,r]=k.useState(null);return l==="iso"?e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b flex justify-between items-center print:hidden",children:[e.jsx("button",{onClick:()=>r(null),className:"text-blue-600 font-bold hover:underline",children:"← العودة للتقارير"}),e.jsx("span",{className:"text-gray-500 text-sm",children:"وضع المعاينة والطباعة"})]}),e.jsx(O,{})]}):l==="sustainability"?e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b flex justify-between items-center print:hidden",children:[e.jsx("button",{onClick:()=>r(null),className:"text-blue-600 font-bold hover:underline",children:"← العودة للتقارير"}),e.jsx("span",{className:"text-gray-500 text-sm",children:"وضع المعاينة والطباعة"})]}),e.jsx(P,{})]}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen font-sans",dir:"rtl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(N,{className:"w-8 h-8 text-gray-700"}),"مركز التقارير الذكي (Reporting Center)"]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"توليد التقارير الرسمية، وثائق الامتثال، ومؤشرات الأداء بضغطة زر."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(g,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer border-t-4 border-t-blue-600 group",onClick:()=>r("iso"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-50 p-3 rounded-full group-hover:bg-blue-100 transition-colors",children:e.jsx(I,{className:"w-8 h-8 text-blue-600"})}),e.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:"رسمي / ISO"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"تقرير الامتثال (ISO 9001)"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"تقرير تفصيلي يوضح نتائج التدقيق الداخلي، حالات عدم المطابقة، وحالة الإجراءات التصحيحية. مطلوب للمدقق الخارجي."}),e.jsx("div",{className:"text-blue-600 font-bold text-sm flex items-center",children:"عرض وطباعة التقرير ←"})]}),e.jsxs(g,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer border-t-4 border-t-green-600 group",onClick:()=>r("sustainability"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-green-50 p-3 rounded-full group-hover:bg-green-100 transition-colors",children:e.jsx(R,{className:"w-8 h-8 text-green-600"})}),e.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:"استراتيجي / SROI"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"تقرير الاستدامة والأثر"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"قياس العائد الاجتماعي (SROI)، كفاءة استخدام الموارد، ومؤشرات السلامة. يدعم تقارير الأداء الاستراتيجي."}),e.jsx("div",{className:"text-green-600 font-bold text-sm flex items-center",children:"عرض وطباعة التقرير ←"})]})]})]})};export{B as ReportsDashboard};
