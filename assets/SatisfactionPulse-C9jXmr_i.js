import{k as v,r,j as e,p as f,d as b,aN as w,ac as _,a as n,bh as d,bi as o,T as C,b4 as k}from"./index-BOMQ6ZnB.js";import{a4 as m,a5 as x}from"./CategoricalChart-CVOu2Sdu.js";import{P as T,a as S}from"./PieChart-CJb0iZgP.js";import{C as $}from"./tooltipContext-aDNLGl9E.js";import{L}from"./LineChart-BCAJLlzb.js";import{C as R}from"./CartesianGrid-Dh6FfMw5.js";import{X as D,Y as P}from"./CartesianChart-BCPM_Iof.js";import{L as A}from"./Line-OmcAOY_B.js";import"./PolarChart-BOiECZ66.js";import"./getRadiusAndStrokeWidthFromDot-DgyDVF4g.js";import"./ErrorBarContext-DeCBPfcE.js";const J=()=>{const h=v(),[g,p]=r.useState(!0),[a,E]=r.useState(72),[j,F]=r.useState("down"),u=[{month:"2025-07",satisfaction_score:85,complaints_count:2,compliments_count:8},{month:"2025-08",satisfaction_score:82,complaints_count:3,compliments_count:6},{month:"2025-09",satisfaction_score:78,complaints_count:4,compliments_count:5},{month:"2025-10",satisfaction_score:75,complaints_count:5,compliments_count:4},{month:"2025-11",satisfaction_score:70,complaints_count:6,compliments_count:3},{month:"2025-12",satisfaction_score:72,complaints_count:5,compliments_count:4}],N=[{type:"complaint",date:"2026-01-08",source:"أسرة المستفيد أحمد",content:"تأخر في إبلاغنا عن حالة ابننا الصحية",status:"pending",severity:"high"},{type:"complaint",date:"2026-01-06",source:"أسرة المستفيدة فاطمة",content:"جودة الطعام غير مرضية",status:"resolved",severity:"medium"},{type:"compliment",date:"2026-01-05",source:"أسرة المستفيد خالد",content:"شكراً على العناية الممتازة بابننا",status:"acknowledged",severity:"positive"},{type:"complaint",date:"2026-01-03",source:"زائر",content:"صعوبة في الوصول لمواقف السيارات",status:"in_progress",severity:"low"}],c=[{family:"أسرة المستفيد أحمد",issue:"عدم الإبلاغ",days_pending:3,risk_level:"high"},{family:"أسرة المستفيدة سارة",issue:"شكوى غذاء متكررة",days_pending:7,risk_level:"medium"}];r.useEffect(()=>{setTimeout(()=>p(!1),500)},[]);const l=s=>s>=80?"from-hrsd-green to-hrsd-green-dark":s>=60?"from-hrsd-gold to-hrsd-gold-dark":"from-red-500 to-red-600",i=[{name:"راضي",value:72,color:"rgb(45, 180, 115)"},{name:"محايد",value:18,color:"rgb(250, 180, 20)"},{name:"غير راضي",value:10,color:"rgb(239, 68, 68)"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>h(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(f,{className:"w-5 h-5"})}),e.jsx("div",{className:`p-3 bg-gradient-to-br ${l(a)} rounded-xl`,children:e.jsx(b,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-hierarchy-title text-gray-900",children:"مؤشر الرضا الآني"}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"توقع مشاكل العلاقات العامة قبل التصعيد"})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mr-auto p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-gray-500"})})]})}),g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-hrsd-teal"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:`bg-gradient-to-br ${l(a)} rounded-2xl p-6 text-white col-span-1`,children:[e.jsx("p",{className:"text-white/80 text-sm mb-2",children:"نسبة الرضا الحالية"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("span",{className:"text-5xl font-bold",children:[a,"%"]}),j==="down"?e.jsx(_,{className:"w-6 h-6 text-white/80 mb-2"}):e.jsx(n,{className:"w-6 h-6 text-white/80 mb-2"})]}),e.jsx("p",{className:"text-sm mt-2 text-white/80",children:a>=80?"ممتاز - استمر!":a>=60?"يحتاج انتباه":"تحذير - خطر تصعيد!"})]}),e.jsxs("div",{className:"hrsd-card",children:[e.jsx("h4",{className:"text-hierarchy-small text-gray-500 mb-3",children:"توزيع الرضا"}),e.jsx(m,{width:"100%",height:150,children:e.jsxs(T,{children:[e.jsx(S,{data:i,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,dataKey:"value",children:i.map((s,t)=>e.jsx($,{fill:s.color},`cell-${t}`))}),e.jsx(x,{formatter:s=>`${s}%`})]})}),e.jsx("div",{className:"flex justify-center gap-4 text-xs",children:i.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{children:s.name})]},t))})]}),e.jsxs("div",{className:"hrsd-card",children:[e.jsx("h4",{className:"text-hierarchy-small text-gray-500 mb-3",children:"إحصائيات الشهر"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx(d,{className:"w-6 h-6 text-red-600 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"5"}),e.jsx("p",{className:"text-xs text-gray-500",children:"شكاوى"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx(o,{className:"w-6 h-6 text-hrsd-green mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-bold text-hrsd-green",children:"4"}),e.jsx("p",{className:"text-xs text-gray-500",children:"إشادات"})]})]})]})]}),e.jsxs("div",{className:"hrsd-card mb-6",children:[e.jsxs("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"w-5 h-5 text-hrsd-teal"}),"اتجاه الرضا (6 أشهر)"]}),e.jsx(m,{width:"100%",height:200,children:e.jsxs(L,{data:u,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"month",tickFormatter:s=>{const[t,y]=s.split("-");return["","يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"][parseInt(y)]}}),e.jsx(P,{domain:[0,100]}),e.jsx(x,{}),e.jsx(A,{type:"monotone",dataKey:"satisfaction_score",stroke:"rgb(20, 130, 135)",strokeWidth:3,name:"نسبة الرضا"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"hrsd-card",children:[e.jsxs("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-red-600"}),"خطر تصعيد للوزارة"]}),c.length>0?e.jsx("div",{className:"space-y-3",children:c.map((s,t)=>e.jsxs("div",{className:`p-4 rounded-lg border-r-4 ${s.risk_level==="high"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.family}),e.jsx("p",{className:"text-sm text-gray-600",children:s.issue})]}),e.jsx("div",{className:"text-left",children:e.jsxs("span",{className:`badge-${s.risk_level==="high"?"danger":"warning"}`,children:[s.days_pending," يوم"]})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"⚠️ توصية: اتصل بالأسرة خلال 24 ساعة"})]},t))}):e.jsx("p",{className:"text-center text-gray-400 py-4",children:"لا توجد مخاطر تصعيد حالياً"})]}),e.jsxs("div",{className:"hrsd-card",children:[e.jsxs("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-hrsd-teal"}),"آخر التعليقات"]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:N.map((s,t)=>e.jsx("div",{className:`p-3 rounded-lg ${s.type==="complaint"?"bg-red-50":"bg-green-50"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[s.type==="complaint"?e.jsx(d,{className:"w-4 h-4 text-red-600 mt-1"}):e.jsx(o,{className:"w-4 h-4 text-hrsd-green mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.source}),e.jsx("p",{className:"text-xs text-gray-600",children:s.content}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.date})]})]})},t))})]})]})]})]})};export{J as SatisfactionPulse,J as default};
