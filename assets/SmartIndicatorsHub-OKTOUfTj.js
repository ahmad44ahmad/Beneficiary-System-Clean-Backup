import{k as w,r as o,T as h,aA as v,d as C,a5 as g,aC as k,U as D,y as V,R as L,j as e,p as m,aN as S,A,aR as R,aQ as H}from"./index-BOMQ6ZnB.js";const B=({data:a,color:n="rgba(20, 130, 135, 0.8)"})=>{const r=Math.max(...a),i=a.map(l=>l/r*100);return e.jsx("div",{className:"sparkline-container",children:i.map((l,t)=>e.jsx("div",{className:"sparkline-bar",style:{height:`${l}%`,background:n}},t))})},I=({score:a,label:n})=>{const r=2*Math.PI*45,i=r-a/100*r,l=t=>t>=70?"rgb(45, 180, 115)":t>=50?"rgb(250, 180, 20)":"rgb(239, 68, 68)";return e.jsxs("div",{className:"health-gauge flex flex-col items-center",children:[e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",className:"health-gauge-circle health-gauge-bg"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",className:"health-gauge-circle",style:{stroke:l(a),strokeDasharray:r,strokeDashoffset:i}}),e.jsx("text",{x:"50",y:"45",textAnchor:"middle",className:"text-2xl font-bold fill-gray-800",children:a}),e.jsx("text",{x:"50",y:"62",textAnchor:"middle",className:"text-xs fill-gray-500",children:"من 100"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-700 mt-2",children:n})]})},T=()=>{const a=w(),[n,r]=o.useState(!0),[i,l]=o.useState(68),t=[{id:"early-warning",title:"الطوارئ الوقائي",subtitle:"نظام الإنذار المبكر",icon:h,path:"/indicators/early-warning",gradientClass:"gradient-danger",mainValue:"105",mainLabel:"نقاط الخطر",trend:"down",trendValue:"-12%",status:"critical",category:"both",sparklineData:[125,115,140,145,170,188,143,103,105]},{id:"biological",title:"التدقيق البيولوجي",subtitle:"كشف الفساد عبر ربط المخزون",icon:v,path:"/indicators/biological",gradientClass:"gradient-primary",mainValue:"-24%",mainLabel:"فجوة غير مبررة",status:"critical",category:"center",sparklineData:[20,18,22,24,21,25,24]},{id:"satisfaction",title:"الرضا الآني",subtitle:"توقع مشاكل العلاقات العامة",icon:C,path:"/indicators/satisfaction",gradientClass:"gradient-warning",mainValue:"72%",mainLabel:"نسبة الرضا",trend:"down",trendValue:"-8%",status:"warning",category:"center",sparklineData:[85,82,78,75,70,72]},{id:"behavioral",title:"التنبؤ السلوكي",subtitle:"منع الانفجار السلوكي بالذكاء الاصطناعي",icon:g,path:"/indicators/behavioral",gradientClass:"gradient-primary",mainValue:"87%",mainLabel:"دقة التنبؤ",status:"warning",category:"center",sparklineData:[80,82,85,83,86,87]},{id:"cost",title:"التكلفة/المستفيد",subtitle:"تحليل التكاليف والخصخصة",icon:k,path:"/indicators/cost",gradientClass:"gradient-warning",mainValue:"380",mainLabel:"ريال/مستفيد/يوم",trend:"stable",status:"good",category:"both",sparklineData:[365,372,380,375,378,380]},{id:"hr",title:"الموارد البشرية",subtitle:"ربط الغياب بجودة الخدمة",icon:D,path:"/indicators/hr",gradientClass:"gradient-family",mainValue:"85%",mainLabel:"نسبة الحضور",status:"warning",category:"center",sparklineData:[92,88,85,90,78,75,85]},{id:"benchmark",title:"المقارنة المرجعية",subtitle:"مقارنة مع معايير الوزارة",icon:V,path:"/indicators/benchmark",gradientClass:"gradient-info",mainValue:"72%",mainLabel:"الأداء العام",status:"warning",category:"ministry",sparklineData:[65,68,70,69,71,72]},{id:"iso",title:"الامتثال ISO 22301",subtitle:"معايير استمرارية الأعمال",icon:L,path:"/indicators/iso",gradientClass:"gradient-primary",mainValue:"52%",mainLabel:"نسبة الامتثال",trend:"up",trendValue:"+5%",status:"warning",category:"ministry",sparklineData:[35,40,45,48,50,52]}];o.useEffect(()=>{setTimeout(()=>{const s=t.filter(c=>c.status==="critical").length,x=t.filter(c=>c.status==="warning").length,N=t.filter(c=>c.status==="good").length,f=Math.round((N*100+x*60+s*20)/t.length);l(f),r(!1)},500)},[]);const u=s=>{switch(s){case"critical":return e.jsx("span",{className:"status-dot status-dot-critical mr-2"});case"warning":return e.jsx("span",{className:"status-dot status-dot-warning mr-2"});default:return e.jsx("span",{className:"status-dot status-dot-success mr-2"})}},p=s=>{switch(s){case"center":return e.jsx("span",{className:"text-xs bg-hrsd-teal/10 text-hrsd-teal px-2 py-0.5 rounded",children:"إدارة المركز"});case"ministry":return e.jsx("span",{className:"text-xs bg-hrsd-navy/10 text-hrsd-navy px-2 py-0.5 rounded",children:"الوزارة"});default:return e.jsx("span",{className:"text-xs bg-hrsd-gold/10 text-hrsd-gold-dark px-2 py-0.5 rounded",children:"المركز + الوزارة"})}},j=s=>{switch(s){case"up":return e.jsx(H,{className:"w-4 h-4 text-hrsd-green"});case"down":return e.jsx(R,{className:"w-4 h-4 text-red-500"});default:return null}},d=t.filter(s=>s.status==="critical").length,b=t.filter(s=>s.status==="warning").length,y=t.filter(s=>s.status==="good").length;return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(m,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-3 gradient-primary rounded-xl animate-glow",children:e.jsx(g,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-hierarchy-title text-gray-900",children:"المؤشرات الذكية"}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"تحليل متقدم بالذكاء الاصطناعي لحماية المركز"})]})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"p-2 hover:bg-gray-100 rounded-lg flex items-center gap-2 text-gray-500",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm hidden md:inline",children:"تحديث"})]})]})}),n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-hrsd-teal"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"hrsd-card flex items-center justify-center col-span-1",children:e.jsx(I,{score:i,label:"صحة المركز"})}),e.jsxs("div",{className:"hrsd-card col-span-1 md:col-span-3",children:[e.jsxs("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-hrsd-teal"}),"ملخص الحالة"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"مؤشرات نشطة"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"status-dot status-dot-critical"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:d})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"حرج"})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"status-dot status-dot-warning"}),e.jsx("p",{className:"text-3xl font-bold text-hrsd-gold",children:b})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"تحذير"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"status-dot status-dot-success"}),e.jsx("p",{className:"text-3xl font-bold text-hrsd-green",children:y})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"جيد"})]})]})]})]}),d>0&&e.jsxs("div",{className:"mb-6 p-4 gradient-danger rounded-xl text-white flex items-center justify-between animate-pulse-soft",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",children:["⚠️ تنبيه: ",d," مؤشرات في حالة حرجة"]}),e.jsx("p",{className:"text-sm text-white/80",children:"يرجى مراجعة المؤشرات الحمراء فوراً"})]})]}),e.jsx("button",{onClick:()=>a("/indicators/early-warning"),className:"px-4 py-2 bg-white/20 rounded-lg hover:bg-white/30 transition-colors",children:"عرض التفاصيل"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map((s,x)=>e.jsxs("div",{onClick:()=>a(s.path),className:"hrsd-card cursor-pointer hover-lift animate-slide-up opacity-0",style:{animationDelay:`${x*.05}s`,animationFillMode:"forwards"},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:`p-3 ${s.gradientClass} rounded-xl`,children:e.jsx(s.icon,{className:"w-5 h-5 text-white"})}),u(s.status)]}),e.jsx("h3",{className:"text-hierarchy-card-title text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-1",children:s.subtitle}),e.jsxs("div",{className:"flex items-end justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.mainValue}),e.jsx("p",{className:"text-xs text-gray-500",children:s.mainLabel})]}),s.trend&&e.jsxs("div",{className:"flex items-center gap-1",children:[j(s.trend),e.jsx("span",{className:`text-xs font-medium ${s.trend==="up"?"text-hrsd-green":s.trend==="down"?"text-red-500":"text-gray-500"}`,children:s.trendValue})]})]}),s.sparklineData&&e.jsx("div",{className:"mb-3",children:e.jsx(B,{data:s.sparklineData,color:s.status==="critical"?"rgba(239, 68, 68, 0.6)":s.status==="warning"?"rgba(250, 180, 20, 0.6)":"rgba(45, 180, 115, 0.6)"})}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[p(s.category),e.jsx(m,{className:"w-4 h-4 text-gray-400"})]})]},s.id))})]})]})};export{T as SmartIndicatorsHub,T as default};
