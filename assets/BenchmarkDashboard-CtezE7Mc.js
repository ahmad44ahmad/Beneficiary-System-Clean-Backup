import{k as v,r as d,j as e,p as w,y as E,aN as C,w as A,a9 as S,V as I,O as T,n as u}from"./index-BOMQ6ZnB.js";const L=()=>{const m=v(),[_,i]=d.useState(!0),[c,o]=d.useState([]),h=[{indicator_name:"نسبة إكمال العناية اليومية",indicator_code:"CARE_COMPLETION",ministry_target:95,excellent_threshold:95,good_threshold:85,acceptable_threshold:75,unit:"نسبة",category:"جودة",is_higher_better:!0,current_value:88},{indicator_name:"معدل حوادث السقوط/1000 يوم",indicator_code:"FALL_RATE",ministry_target:2,excellent_threshold:1,good_threshold:3,acceptable_threshold:5,unit:"معدل",category:"سلامة",is_higher_better:!1,current_value:2.5},{indicator_name:"نسبة الامتثال لنظافة اليدين",indicator_code:"HAND_HYGIENE",ministry_target:90,excellent_threshold:95,good_threshold:85,acceptable_threshold:75,unit:"نسبة",category:"IPC",is_higher_better:!0,current_value:82},{indicator_name:"زمن الاستجابة للتنبيهات",indicator_code:"ALERT_RESPONSE",ministry_target:15,excellent_threshold:10,good_threshold:20,acceptable_threshold:30,unit:"دقيقة",category:"استجابة",is_higher_better:!1,current_value:18},{indicator_name:"نسبة رضا الأسر",indicator_code:"FAMILY_SATISFACTION",ministry_target:85,excellent_threshold:90,good_threshold:80,acceptable_threshold:70,unit:"نسبة",category:"رضا",is_higher_better:!0,current_value:72},{indicator_name:"تكلفة المستفيد اليومية",indicator_code:"DAILY_COST",ministry_target:350,excellent_threshold:300,good_threshold:400,acceptable_threshold:500,unit:"ريال",category:"مالي",is_higher_better:!1,current_value:380},{indicator_name:"نسبة التسليم في الوقت",indicator_code:"ON_TIME_HANDOVER",ministry_target:95,excellent_threshold:98,good_threshold:90,acceptable_threshold:80,unit:"نسبة",category:"جودة",is_higher_better:!0,current_value:92},{indicator_name:"نسبة الصيانة الوقائية المنجزة",indicator_code:"PREVENTIVE_MAINTENANCE",ministry_target:90,excellent_threshold:95,good_threshold:85,acceptable_threshold:75,unit:"نسبة",category:"سلامة",is_higher_better:!0,current_value:78}];d.useEffect(()=>{(async()=>{i(!0);const{data:s,error:l}=await S.from("benchmark_standards").select("*");if(l||!s||s.length===0)o(h);else{const a=s.map((n,f)=>{var g;return{...n,current_value:((g=h[f])==null?void 0:g.current_value)||Math.random()*100}});o(a)}i(!1)})()},[]);const x=t=>{const s=t.current_value||0;return t.is_higher_better?s>=t.excellent_threshold?"excellent":s>=t.good_threshold?"good":s>=t.acceptable_threshold?"acceptable":"poor":s<=t.excellent_threshold?"excellent":s<=t.good_threshold?"good":s<=t.acceptable_threshold?"acceptable":"poor"},p=t=>{switch(t){case"excellent":return e.jsx(u,{className:"w-5 h-5 text-hrsd-green"});case"good":return e.jsx(u,{className:"w-5 h-5 text-hrsd-teal"});case"acceptable":return e.jsx(T,{className:"w-5 h-5 text-hrsd-gold"});default:return e.jsx(I,{className:"w-5 h-5 text-red-600"})}},N=t=>{switch(t){case"excellent":return"badge-success";case"good":return"badge-info";case"acceptable":return"badge-warning";default:return"badge-danger"}},j=t=>{switch(t){case"excellent":return"ممتاز";case"good":return"جيد";case"acceptable":return"مقبول";default:return"ضعيف"}},r=c.reduce((t,s)=>{const l=x(s);return t[l]=(t[l]||0)+1,t},{}),b=Math.round(((r.excellent||0)*100+(r.good||0)*75+(r.acceptable||0)*50+(r.poor||0)*25)/c.length),y=[...new Set(c.map(t=>t.category))];return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>m(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(w,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-hrsd-teal to-hrsd-navy rounded-xl",children:e.jsx(E,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-hierarchy-title text-gray-900",children:"مؤشر المقارنة المرجعية"}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"مقارنة أداء المركز مع معايير الوزارة"})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mr-auto p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(C,{className:"w-5 h-5 text-gray-500"})})]})}),_?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-hrsd-teal"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-hrsd-teal to-hrsd-navy rounded-2xl p-6 text-white col-span-2 md:col-span-1",children:[e.jsx(A,{className:"w-8 h-8 mb-2"}),e.jsxs("p",{className:"text-4xl font-bold",children:[b,"%"]}),e.jsx("p",{className:"text-sm text-white/80",children:"الأداء العام"})]}),e.jsxs("div",{className:"hrsd-card text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-hrsd-green",children:r.excellent||0}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"ممتاز"})]}),e.jsxs("div",{className:"hrsd-card text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-hrsd-teal",children:r.good||0}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"جيد"})]}),e.jsxs("div",{className:"hrsd-card text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-hrsd-gold",children:r.acceptable||0}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"مقبول"})]}),e.jsxs("div",{className:"hrsd-card text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.poor||0}),e.jsx("p",{className:"text-hierarchy-small text-gray-500",children:"ضعيف"})]})]}),y.map(t=>e.jsxs("div",{className:"hrsd-card mb-4",children:[e.jsx("h3",{className:"text-hierarchy-subheading text-gray-800 mb-4",children:t}),e.jsx("div",{className:"space-y-3",children:c.filter(s=>s.category===t).map((s,l)=>{const a=x(s),n=s.is_higher_better?Math.min(100,s.current_value/s.ministry_target*100):Math.min(100,s.ministry_target/s.current_value*100);return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p(a),e.jsx("span",{className:"font-medium",children:s.indicator_name})]}),e.jsx("span",{className:N(a),children:j(a)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${a==="excellent"?"bg-hrsd-green":a==="good"?"bg-hrsd-teal":a==="acceptable"?"bg-hrsd-gold":"bg-red-500"}`,style:{width:`${Math.min(100,n)}%`}})}),e.jsxs("div",{className:"text-left min-w-[100px]",children:[e.jsx("span",{className:"font-bold text-gray-900",children:s.current_value}),e.jsxs("span",{className:"text-gray-500 text-sm",children:[" / ",s.ministry_target," ",s.unit]})]})]})]},l)})})]},t))]})]})};export{L as BenchmarkDashboard,L as default};
