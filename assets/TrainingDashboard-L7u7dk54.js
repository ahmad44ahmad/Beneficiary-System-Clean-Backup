import{r as b,j as e,B as x,u as j}from"./index-BOMQ6ZnB.js";import{I as h}from"./Input-C08-tSFm.js";const N=({beneficiaries:o,onSubmit:n,onCancel:g})=>{const[d,m]=b.useState(""),[r,l]=b.useState({referralDate:new Date().toISOString().split("T")[0],goals:{communityIntegration:!1,educationalIntegration:!1,returnToFamily:!1,vocationalPrep:!1,skillDevelopment:!1,talentDevelopment:!1},currentPerformance:{selfCare:"average",eating:"average",personalHygiene:"average",communication:"average",socialEtiquette:"average",cooperation:"average",discrimination:"average",toolKnowledge:"average",instructionAcceptance:"average",spatialTemporalAwareness:"average",namesAwareness:"average",dangerAwareness:"average",writingAbility:"average",concentration:"average"}}),s=o.find(a=>a.id===d),c=a=>{l(t=>({...t,goals:{...t.goals,[a]:!t.goals[a]}}))},i=(a,t)=>{l(p=>({...p,currentPerformance:{...p.currentPerformance,[a]:t}}))},u=a=>{if(a.preventDefault(),!d)return;const t={id:crypto.randomUUID(),beneficiaryId:d,referralDate:r.referralDate,referralDateHijri:r.referralDateHijri,medicalDiagnosis:s==null?void 0:s.medicalDiagnosis,psychologicalDiagnosis:s==null?void 0:s.psychiatricDiagnosis,goals:r.goals,currentPerformance:r.currentPerformance,specialistName:r.specialistName,trainerName:r.trainerName,supervisorName:r.supervisorName,notes:r.notes||""};n(t)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl my-8",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-gray-50 rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"نموذج تحويل للالتحاق بالبرامج التدريبية (نموذج 4)"}),e.jsx(x,{variant:"ghost",onClick:g,children:"✕"})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المستفيد"}),e.jsxs("select",{className:"w-full border rounded-md p-2",value:d,onChange:a=>m(a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"اختر مستفيد..."}),o.map(a=>e.jsx("option",{value:a.id,children:a.fullName},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الميلاد"}),e.jsx("div",{className:"p-2 bg-gray-100 rounded border text-gray-600",children:(s==null?void 0:s.dob)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"التشخيص الطبي"}),e.jsx("div",{className:"p-2 bg-gray-100 rounded border text-gray-600",children:(s==null?void 0:s.medicalDiagnosis)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"التشخيص النفسي"}),e.jsx("div",{className:"p-2 bg-gray-100 rounded border text-gray-600",children:(s==null?void 0:s.psychiatricDiagnosis)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ التحويل (ميلادي)"}),e.jsx(h,{type:"date",value:r.referralDate,onChange:a=>l({...r,referralDate:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الغرفة"}),e.jsx("div",{className:"p-2 bg-gray-100 rounded border text-gray-600",children:(s==null?void 0:s.roomNumber)||"-"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-green-700 border-b pb-2",children:"1. أهداف التحويل"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{k:"communityIntegration",label:"دمج مجتمعي"},{k:"educationalIntegration",label:"دمج تعليمي"},{k:"returnToFamily",label:"عودة للأسرة"},{k:"skillDevelopment",label:"تطوير مهارات"},{k:"vocationalPrep",label:"تهيئة مهنية"},{k:"talentDevelopment",label:"تنمية مواهب"}].map(({k:a,label:t})=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.goals[a],onChange:()=>c(a),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("span",{className:"font-medium text-gray-700",children:t})]},a))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-green-700 border-b pb-2",children:"2. مستوى الأداء الحالي"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-right w-1/2",children:"المهارة"}),e.jsx("th",{className:"border p-2 text-center",children:"جيد"}),e.jsx("th",{className:"border p-2 text-center",children:"جيد نوعاً ما"}),e.jsx("th",{className:"border p-2 text-center",children:"الملاحظات"})]})}),e.jsx("tbody",{children:[{k:"selfCare",label:"الاعتماد على نفسه قضاء الحاجة"},{k:"eating",label:"الاعتماد على نفسه في تناول الطعام"},{k:"personalHygiene",label:"الاعتماد على نفسه في العناية الشخصية"},{k:"communication",label:"التواصل مع الآخرين"},{k:"socialEtiquette",label:"معرفة الآداب العامة واحترام الآخرين"},{k:"cooperation",label:"يشارك ويبادر للتعاون مع الآخرين"},{k:"discrimination",label:"لديه القدرة على التمييز والتصنيف"},{k:"toolKnowledge",label:"لديه حصيلة معرفية للأدوات حوله"},{k:"instructionAcceptance",label:"يتقبل الأوامر والتوجيهات"},{k:"spatialTemporalAwareness",label:"يدرك المكان والزمان"},{k:"namesAwareness",label:"يدرك أسماء المحيطين حوله"},{k:"dangerAwareness",label:"يدرك المخاطر ويبتعد عنها"},{k:"writingAbility",label:"يمسك القلم ويحاول الكتابة"},{k:"concentration",label:"مستوى التركيز والانتباه لديه"}].map(({k:a,label:t})=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border p-2 text-gray-800 font-medium",children:t}),e.jsx("td",{className:"border p-2 text-center",children:e.jsx("input",{type:"radio",name:a,checked:r.currentPerformance[a]==="good",onChange:()=>i(a,"good")})}),e.jsx("td",{className:"border p-2 text-center",children:e.jsx("input",{type:"radio",name:a,checked:r.currentPerformance[a]==="average",onChange:()=>i(a,"average")})}),e.jsx("td",{className:"border p-2",children:e.jsx("input",{className:"w-full border-none bg-transparent focus:ring-0 text-sm",placeholder:"..."})})]},a))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأخصائي المتابع"}),e.jsx(h,{value:r.specialistName,onChange:a=>l({...r,specialistName:a.target.value}),placeholder:"الاسم والتوقيع"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المدرب المستلم"}),e.jsx(h,{value:r.trainerName,onChange:a=>l({...r,trainerName:a.target.value}),placeholder:"الاسم والتوقيع"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"مشرف قسم التأهيل المجتمعي"}),e.jsx(h,{value:r.supervisorName,onChange:a=>l({...r,supervisorName:a.target.value}),placeholder:"الاسم والتوقيع"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[e.jsx(x,{variant:"outline",onClick:g,type:"button",children:"إلغاء"}),e.jsx(x,{className:"bg-green-600 hover:bg-green-700 text-white",type:"submit",children:"حفظ واعتماد النموذج"})]})]})]})})},y=()=>{const{beneficiaries:o}=j(),[n,g]=b.useState([]),[d,m]=b.useState(!1),r=l=>{g(s=>[l,...s]),m(!1)};return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"التأهيل المجتمعي والتدريب"}),e.jsx("p",{className:"text-gray-500",children:"إدارة طلبات التحويل ومتابعة البرامج التدريبية"})]}),e.jsx(x,{className:"bg-green-600",onClick:()=>m(!0),children:"+ طلب تحويل جديد (نموذج 4)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-gray-500 text-sm",children:"إجمالي المحولين"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-gray-500 text-sm",children:"دمج تعليمي"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(l=>l.goals.educationalIntegration).length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-gray-500 text-sm",children:"تأهيل مهني"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(l=>l.goals.vocationalPrep).length})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"font-bold text-gray-700",children:"سجل التحويلات"})}),e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"اسم المستفيد"}),e.jsx("th",{className:"p-3",children:"تاريخ التحويل"}),e.jsx("th",{className:"p-3",children:"نوع التحويل"}),e.jsx("th",{className:"p-3",children:"الحالة"}),e.jsx("th",{className:"p-3",children:"الإجراءات"})]})}),e.jsxs("tbody",{className:"divide-y",children:[n.map(l=>{const s=o.find(i=>i.id===l.beneficiaryId),c=[];return l.goals.educationalIntegration&&c.push("تعليمي"),l.goals.vocationalPrep&&c.push("مهني"),l.goals.socialIntegration&&c.push("مجتمعي"),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 font-medium",children:(s==null?void 0:s.fullName)||"غير معروف"}),e.jsx("td",{className:"p-3",children:l.referralDate}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:c.map(i=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs",children:i},i))})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-green-600 bg-green-50 px-2 py-1 rounded",children:"معتمد"})}),e.jsx("td",{className:"p-3",children:e.jsx(x,{variant:"ghost",size:"sm",children:"عرض"})})]},l.id)}),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-400",children:"لا توجد طلبات تحويل مسجلة"})})]})]})]}),d&&e.jsx(N,{beneficiaries:o,onSubmit:r,onCancel:()=>m(!1)})]})};export{y as TrainingDashboard};
